<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://www.ljjyy.com">
    <!--SEO-->

    <meta name="keywords" content="stock,python">


    <meta name="description" content="InStock股票系统，抓取每日股票、ETF关键数据，计算股票各种指标，识别K线各种形态，内置多种选股策略，支持选股验证回测，支持自动交易，支持批量时间，运行高效，同时提供Docker镜像方便安...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>InStock股票系统 | 来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</title>


    <link rel="alternate" href="/atom.xml" title="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
        <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
        <script>LA.init({id: "JgbNOaw1xxsmUUsQ",ck: "JgbNOaw1xxsmUUsQ"})</script>
	</div>






    
    <meta name="baidu-site-verification" content="dTHILoORpx">


    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  >
    <div class="main-header-box">
        <!--a class="header-avatar" href="/" title='Ljjyy.com'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a-->
        <div class="branding">
            
                <h2> 多读书多实践，勤思考善领悟 </h2>
            
    	  </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="web-logo"  href="/" title='Ljjyy.com'></a>
                    <!--a class="navbar-brand" href="https://www.ljjyy.com">来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</a-->
                </div>
                <div class="collapse navbar-collapse" id="main-menu" style="">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/cloud/"><i class="fa "></i>云计算</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/front/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/back/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/devops/"><i class="fa "></i>运维</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/crack/"><i class="fa "></i>破解</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/penetration/"><i class="fa "></i>渗透</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/tool/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/other/"><i class="fa "></i>其他</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="InStock股票系统">
            
	            InStock股票系统
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/other/">其他</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/python/">python</a> <a class="tag-link" href="/tags/stock/">stock</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2023/03/22</span>
        </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <p>InStock股票系统，抓取每日股票、ETF关键数据，计算股票各种指标，识别K线各种形态，内置多种选股策略，支持选股验证回测，支持自动交易，支持批量时间，运行高效，同时提供Docker镜像方便安装，是量化投资的好帮手。</p>
<p>本项目地址：<a href="https://github.com/myhhub/stock" target="_blank" rel="noopener">https://github.com/myhhub/stock</a></p>
<p>Docker镜像：<a href="https://hub.docker.com/r/mayanghua/instock" target="_blank" rel="noopener">https://hub.docker.com/r/mayanghua/instock</a> <strong>镜像优化构建仅170M</strong>。</p>
<h1 id="功能介绍"><a href="#功能介绍" class="headerlink" title="功能介绍"></a>功能介绍</h1><h2 id="一：股票每日数据"><a href="#一：股票每日数据" class="headerlink" title="一：股票每日数据"></a>一：股票每日数据</h2><p>包括每日股票数据、股票资金流向、股票分红配送、股票龙虎榜、股票大宗交易、股票基本面数据、每日ETF数据。</p>
<p>抓取A股票每日数据，主要为一些关键数据，同时封装抓取方法，方便扩展系统获取个人关注的数据。</p>
<div align="center"><img src="/img/stock/00.jpg" alt></div>

<h2 id="二：股票指标计算"><a href="#二：股票指标计算" class="headerlink" title="二：股票指标计算"></a>二：股票指标计算</h2><p>基于talib、pandas 计算指标，计算高效准确。调整个别指标公式，确保结果和同花顺、通信达结果一致。<br>指标：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、MACD <span class="number">2</span>、KDJ <span class="number">3</span>、BOLL <span class="number">4</span>、TRIX，TRMA <span class="number">5</span>、CR <span class="number">6</span>、SMA <span class="number">7</span>、RSI </span><br><span class="line"><span class="number">8</span>、VR，MAVR <span class="number">9</span>、ROC <span class="number">10</span>、DMI，+DI，-DI，DX，ADX，ADXR <span class="number">11</span>、W&amp;R </span><br><span class="line"><span class="number">12</span>、CCI <span class="number">13</span>、TR、ATR <span class="number">14</span>、DMA、AMA <span class="number">15</span>、OBV <span class="number">16</span>、SAR <span class="number">17</span>、PSY </span><br><span class="line"><span class="number">18</span>、BRAR <span class="number">19</span>、EMV <span class="number">20</span>、BIAS <span class="number">21</span>、TEMA  <span class="number">22</span>、MFI <span class="number">23</span>、VWMA</span><br><span class="line"><span class="number">24</span>、PPO <span class="number">25</span>、WT <span class="number">26</span>、Supertrend  <span class="number">27</span>、DPO  <span class="number">28</span>、VHF  <span class="number">29</span>、RVI</span><br><span class="line"><span class="number">30</span>、FI <span class="number">31</span>、ENE <span class="number">32</span>、STOCHRSI</span><br></pre></td></tr></table></figure>
<div align="center"><img src="/img/stock/01.jpg" alt></div><br><div align="center"><img src="/img/stock/06.jpg" alt></div><br><div align="center"><img src="/img/stock/10.jpg" alt></div><br><div align="center"><img src="/img/stock/02.jpg" alt></div>


<h2 id="三：判断买入卖出的股票"><a href="#三：判断买入卖出的股票" class="headerlink" title="三：判断买入卖出的股票"></a>三：判断买入卖出的股票</h2><p>根据指标判定可能买入卖出的股票，具体筛选条件如下：</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">KDJ:</span></span><br><span class="line"><span class="number">1</span>、超买区：K值在<span class="number">80</span>以上，D值在<span class="number">70</span>以上，J值大于<span class="number">90</span>时为超买。一般情况下，股价有可能下跌。投资者应谨慎行事，局外人不应再追涨，局内人应适时卖出。</span><br><span class="line"><span class="number">2</span>、超卖区：K值在<span class="number">20</span>以下，D值在<span class="number">30</span>以下为超卖区。一般情况下，股价有可能上涨，反弹的可能性增大。局内人不应轻易抛出股票，局外人可寻机入场。</span><br><span class="line"><span class="symbol">RSI:</span></span><br><span class="line"><span class="number">1</span>、当六日指标上升到达<span class="number">80</span>时，表示股市已有超买现象，如果一旦继续上升，超过<span class="number">90</span>以上时，则表示已到严重超买的警戒区，股价已形成头部，极可能在短期内反转回转。</span><br><span class="line"><span class="number">2</span>、当六日强弱指标下降至<span class="number">20</span>时，表示股市有超卖现象，如果一旦继续下降至<span class="number">10</span>以下时则表示已到严重超卖区域，股价极可能有止跌回升的机会。</span><br><span class="line"><span class="symbol">CCI:</span></span><br><span class="line"><span class="number">1</span>、当CCI＞﹢<span class="number">100</span>时，表明股价已经进入非常态区间——超买区间，股价的异动现象应多加关注。</span><br><span class="line"><span class="number">2</span>、当CCI＜﹣<span class="number">100</span>时，表明股价已经进入另一个非常态区间——超卖区间，投资者可以逢低吸纳股票。</span><br><span class="line"><span class="symbol">CR:</span></span><br><span class="line"><span class="number">1</span>、跌穿a、b、c、d四条线，再由低点向上爬升<span class="number">160</span>时，为短线获利的一个良机，应适当卖出股票。</span><br><span class="line"><span class="number">2</span>、CR跌至<span class="number">40</span>以下时，是建仓良机。</span><br><span class="line"><span class="symbol">WR:</span></span><br><span class="line"><span class="number">1</span>、当％R线达到<span class="number">20</span>时，市场处于超买状况，走势可能即将见顶。</span><br><span class="line"><span class="number">2</span>、当％R线达到<span class="number">80</span>时，市场处于超卖状况，股价走势随时可能见底。</span><br><span class="line"><span class="symbol">VR:</span></span><br><span class="line"><span class="number">1</span>、获利区域<span class="number">160</span>－<span class="number">450</span>根据情况获利了结。</span><br><span class="line"><span class="number">2</span>、低价区域<span class="number">40</span>－<span class="number">70</span>可以买进。</span><br></pre></td></tr></table></figure>
<div align="center"><img src="/img/stock/05.jpg" alt></div>

<h2 id="四：K线形态识别"><a href="#四：K线形态识别" class="headerlink" title="四：K线形态识别"></a>四：K线形态识别</h2><p>精准识别61种K线形态，支持用户自选形态识别。</p>
<p>识别形态:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、两只乌鸦<span class="number">2</span>、三只乌鸦<span class="number">3</span>、三内部上涨和下跌<span class="number">4</span>、三线打击<span class="number">5</span>、三外部上涨和下跌<span class="number">6</span>、南方三星<span class="number">7</span>、三个白兵<span class="number">8</span>、弃婴</span><br><span class="line"><span class="number">9</span>、大敌当前<span class="number">10</span>、捉腰带线<span class="number">11</span>、脱离<span class="number">12</span>、收盘缺影线<span class="number">13</span>、藏婴吞没<span class="number">14</span>、反击线<span class="number">15</span>、乌云压顶<span class="number">16</span>、十字<span class="number">17</span>、十字星</span><br><span class="line"><span class="number">18</span>、蜻蜓十字/T形十字<span class="number">19</span>、吞噬模式<span class="number">20</span>、十字暮星  <span class="number">21</span>、暮星<span class="number">22</span>、向上/下跳空并列阳线<span class="number">23</span>、墓碑十字/倒T十字</span><br><span class="line"><span class="number">24</span>、锤头<span class="number">25</span>、上吊线<span class="number">26</span>、母子线<span class="number">27</span>、十字孕线<span class="number">28</span>、风高浪大线<span class="number">29</span>、陷阱<span class="number">30</span>、修正陷阱<span class="number">31</span>、家鸽<span class="number">32</span>、三胞胎乌鸦</span><br><span class="line"><span class="number">33</span>、颈内线<span class="number">34</span>、倒锤头<span class="number">35</span>、反冲形态<span class="number">36</span>、由较长缺影线决定的反冲形态<span class="number">37</span>、梯底<span class="number">38</span>、长脚十字<span class="number">39</span>、长蜡烛</span><br><span class="line"><span class="number">40</span>、光头光脚/缺影线 <span class="number">41</span>、相同低价<span class="number">42</span>、铺垫<span class="number">43</span>、十字晨星<span class="number">44</span>、晨星<span class="number">45</span>、颈上线<span class="number">46</span>、刺透形态<span class="number">47</span>、黄包车夫</span><br><span class="line"><span class="number">48</span>、上升/下降三法<span class="number">49</span>、分离线<span class="number">50</span>、射击之星<span class="number">51</span>、短蜡烛<span class="number">52</span>、纺锤<span class="number">53</span>、停顿形态<span class="number">54</span>、条形三明治<span class="number">55</span>、探水竿</span><br><span class="line"><span class="number">56</span>、跳空并列阴阳线<span class="number">57</span>、插入<span class="number">58</span>、三星<span class="number">59</span>、奇特三河床<span class="number">60</span>、向上跳空的两只乌鸦<span class="number">61</span>、上升/下降跳空三法</span><br></pre></td></tr></table></figure>
<p>形态识别结果：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">负：出现卖出信号</span><br><span class="line"><span class="number">0</span>：没有出现该形态</span><br><span class="line">正：出现买入信号</span><br></pre></td></tr></table></figure>
<div align="center"><img src="/img/stock/09.jpg" alt></div><br><div align="center"><img src="/img/stock/06.jpg" alt></div>

<h2 id="五：策略选股"><a href="#五：策略选股" class="headerlink" title="五：策略选股"></a>五：策略选股</h2><p>内置放量上涨、停机坪、回踩年线、突破平台、放量跌停等多种选股策略，同时封装了策略模板，方便扩展实现自己的策略。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、放量上涨</span><br><span class="line">    <span class="number">1</span>）当日比前一天上涨小于<span class="number">2</span>%或收盘价小于开盘价。</span><br><span class="line">    <span class="number">2</span>）当日成交额不低于<span class="number">2</span>亿。</span><br><span class="line">    <span class="number">3</span>）当日成交量/<span class="number">5</span>日平均成交量&gt;=<span class="number">2</span>。</span><br><span class="line"><span class="number">2</span>、均线多头</span><br><span class="line">    MA30向上</span><br><span class="line">    <span class="number">1</span>）<span class="number">30</span>日前的<span class="number">30</span>日均线&lt;<span class="number">20</span>日前的<span class="number">30</span>日均线&lt;<span class="number">10</span>日前的<span class="number">30</span>日均线&lt;当日的<span class="number">30</span>日均线。</span><br><span class="line">    <span class="number">2</span>）(当日的<span class="number">30</span>日均线/<span class="number">30</span>日前的<span class="number">30</span>日均线)&gt;<span class="number">1.2</span>。</span><br><span class="line"><span class="number">3</span>、停机坪</span><br><span class="line">    <span class="number">1</span>）最近<span class="number">15</span>日有涨幅大于<span class="number">9.5</span>%，且必须是放量上涨。</span><br><span class="line">    <span class="number">2</span>）紧接的下个交易日必须高开，收盘价必须上涨，且与开盘价不能大于等于相差<span class="number">3</span>%。</span><br><span class="line">    <span class="number">3</span>）接下<span class="number">2</span>、<span class="number">3</span>个交易日必须高开，收盘价必须上涨，且与开盘价不能大于等于相差<span class="number">3</span>%，且每天涨跌幅在<span class="number">5</span>%间。</span><br><span class="line"><span class="number">4</span>、回踩年线</span><br><span class="line">    <span class="number">1</span>）分<span class="number">2</span>个时间段：前段=最近<span class="number">60</span>交易日最高收盘价之前交易日(长度&gt;<span class="number">0</span>)，后段=最高价当日及后面的交易日。</span><br><span class="line">    <span class="number">2</span>）前段由年线(<span class="number">250</span>日)以下向上突破。</span><br><span class="line">    <span class="number">3</span>）后段必须在年线以上运行，且后段最低价日与最高价日相差必须在<span class="number">10</span><span class="number">-50</span>日间。</span><br><span class="line">    <span class="number">4</span>）回踩伴随缩量：最高价日交易量/后段最低价日交易量&gt;<span class="number">2</span>,后段最低价/最高价&lt;<span class="number">0.8</span>。</span><br><span class="line"><span class="number">5</span>、突破平台</span><br><span class="line">    <span class="number">1</span>）<span class="number">60</span>日内某日收盘价&gt;=<span class="number">60</span>日均线&gt;开盘价。</span><br><span class="line">    <span class="number">2</span>）且【<span class="number">1</span>】放量上涨。</span><br><span class="line">    <span class="number">3</span>）且【<span class="number">1</span>】间之前时间，任意一天收盘价与<span class="number">60</span>日均线偏离在<span class="number">-5</span>%~<span class="number">20</span>%之间。</span><br><span class="line"><span class="number">6</span>、无大幅回撤</span><br><span class="line">    <span class="number">1</span>）当日收盘价比<span class="number">60</span>日前的收盘价的涨幅小于<span class="number">0.6</span>。</span><br><span class="line">    <span class="number">2</span>）最近<span class="number">60</span>日，不能有单日跌幅超<span class="number">7</span>%、高开低走<span class="number">7</span>%、两日累计跌幅<span class="number">10</span>%、两日高开低走累计<span class="number">10</span>%。</span><br><span class="line"><span class="number">7</span>、海龟交易法则</span><br><span class="line">    最后一个交易日收市价为指定区间内最高价。</span><br><span class="line">    <span class="number">1</span>）当日收盘价&gt;=最近<span class="number">60</span>日最高收盘价。</span><br><span class="line"><span class="number">8</span>、高而窄的旗形</span><br><span class="line">    <span class="number">1</span>）必须至少上市交易<span class="number">60</span>日。</span><br><span class="line">    <span class="number">2</span>）当日收盘价/之前<span class="number">24</span>~<span class="number">10</span>日的最低价&gt;=<span class="number">1.9</span>。</span><br><span class="line">    <span class="number">3</span>）之前<span class="number">24</span>~<span class="number">10</span>日必须连续两天涨幅大于等于<span class="number">9.5</span>%。</span><br><span class="line"><span class="number">9</span>、放量跌停。</span><br><span class="line">    <span class="number">1</span>）跌&gt;<span class="number">9.5</span>%。</span><br><span class="line">    <span class="number">2</span>）成交额不低于<span class="number">2</span>亿。</span><br><span class="line">    <span class="number">3</span>）成交量至少是<span class="number">5</span>日平均成交量的<span class="number">4</span>倍。</span><br><span class="line"><span class="number">10</span>、低ATR成长</span><br><span class="line">    <span class="number">1</span>）必须至少上市交易<span class="number">250</span>日。</span><br><span class="line">    <span class="number">2</span>）最近<span class="number">10</span>个交易日的最高收盘价必须比最近<span class="number">10</span>个交易日的最低收盘价高<span class="number">1.1</span>倍。</span><br><span class="line"><span class="number">11</span>、股票基本面选股</span><br><span class="line">    <span class="number">1</span>）市盈率小于等于<span class="number">20</span>，且大于<span class="number">0</span>。</span><br><span class="line">    <span class="number">2</span>）市净率小于等于<span class="number">10</span>。</span><br><span class="line">    <span class="number">3</span>）净资产收益率大于等于<span class="number">15</span>。</span><br></pre></td></tr></table></figure>
<div align="center"><img src="/img/stock/04.jpg" alt></div>

<h2 id="六：选股验证"><a href="#六：选股验证" class="headerlink" title="六：选股验证"></a>六：选股验证</h2><p>对指标、策略等选出的股票进行回测，验证策略的成功率，是否可用。</p>
<div align="center"><img src="/img/stock/05.jpg" alt></div>

<h2 id="七：自动交易"><a href="#七：自动交易" class="headerlink" title="七：自动交易"></a>七：自动交易</h2><p>支持自动交易，内置自动打新股的策略及示例策略，由于<strong>涉及金钱</strong>，规避可能存在风险，没有提供其他交易策略。</p>
<p>具有交易日志，以及支持为每个交易策略配置交易日志。</p>
<p><strong>特别提醒</strong>：交易日10:00点会触发打新，不想打新的删除stagging.py或不要启动“交易服务”。</p>
<h2 id="八：关注功能"><a href="#八：关注功能" class="headerlink" title="八：关注功能"></a>八：关注功能</h2><p>支持股票关注，关注的股票在各个模块(若有该数据)置顶、标红显示。</p>
<h2 id="九：支持批量"><a href="#九：支持批量" class="headerlink" title="九：支持批量"></a>九：支持批量</h2><p>可以通过时间段、枚举时间、当前时间进行指标计算、策略选股及回测等。同时支持智能识别交易日，可以输入任意日期。</p>
<p>具体执行设置如下：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">------整体作业，支持批量作业------</span><br><span class="line">当前时间作业 <span class="keyword">python</span> execute_daily_job.<span class="keyword">py</span></span><br><span class="line">单个时间作业 <span class="keyword">python</span> execute_daily_job.<span class="keyword">py</span> <span class="number">2022</span>-<span class="number">03</span>-<span class="number">01</span></span><br><span class="line">枚举时间作业 <span class="keyword">python</span> execute_daily_job.<span class="keyword">py</span> <span class="number">2022</span>-<span class="number">01</span>-<span class="number">01</span>,<span class="number">2021</span>-<span class="number">02</span>-<span class="number">08</span>,<span class="number">2022</span>-<span class="number">03</span>-<span class="number">12</span></span><br><span class="line">区间时间作业 <span class="keyword">python</span> execute_daily_job.<span class="keyword">py</span> <span class="number">2022</span>-<span class="number">01</span>-<span class="number">01</span> <span class="number">2022</span>-<span class="number">03</span>-<span class="number">01</span></span><br><span class="line"></span><br><span class="line">------单功能作业，支持批量作业，回测数据自动填补到当前</span><br><span class="line">基础数据实时作业 <span class="keyword">python</span> basic_data_daily_job.<span class="keyword">py</span></span><br><span class="line">基础数据非实时作业 <span class="keyword">python</span> basic_data_other_daily_job.<span class="keyword">py</span></span><br><span class="line">指标数据作业 <span class="keyword">python</span> indicators_data_daily_job.<span class="keyword">py</span></span><br><span class="line">K线形态作业 klinepattern_data_daily_job.<span class="keyword">py</span></span><br><span class="line">策略数据作业 <span class="keyword">python</span> strategy_data_daily_job.<span class="keyword">py</span></span><br><span class="line">回测数据 <span class="keyword">python</span> backtest_data_daily_job.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>
<h2 id="十：存储采用数据库设计"><a href="#十：存储采用数据库设计" class="headerlink" title="十：存储采用数据库设计"></a>十：存储采用数据库设计</h2><p>数据存储采用数据库设计，能保存历史数据，以及对数据进行扩展分析、统计、挖掘。系统实现自动创建数据库、数据表，封装了批量更新、插入数据，方便业务扩展。</p>
<div align="center"><img src="/img/stock/07.jpg" alt></div>

<h2 id="十一：展示采用web设计"><a href="#十一：展示采用web设计" class="headerlink" title="十一：展示采用web设计"></a>十一：展示采用web设计</h2><p>采用web设计，可视化展示结果。对展示进行封装，添加新的业务表单，只需要配置视图字典就可自动出现业务可视化界面，方便业务功能扩展。</p>
<h2 id="十二：运行高效"><a href="#十二：运行高效" class="headerlink" title="十二：运行高效"></a>十二：运行高效</h2><p>采用多线程、单例共享资源有效提高运算效率。1天数据的抓取、计算指标、形态识别、策略选股、回测等全部任务运行时间大概4分钟（普通笔记本），计算天数越多效率越高。</p>
<h2 id="十三：方便调试"><a href="#十三：方便调试" class="headerlink" title="十三：方便调试"></a>十三：方便调试</h2><p>系统运行的重要日志记录在stock_execute_job.log(数据抓取、处理、分析)、stock_web.log(web服务)，方便调试发现问题。</p>
<div align="center"><img src="/img/stock/08.jpg" alt></div>

<h1 id="安装说明"><a href="#安装说明" class="headerlink" title="安装说明"></a>安装说明</h1><p>本系统支持Windows、Linux、MacOS，同时本系统创建了Docker镜像，按自己需要选择安装方式。</p>
<p>下面按分常规安装方式、docker镜像安装方式进行一一说明。</p>
<h2 id="一：常规安装方式"><a href="#一：常规安装方式" class="headerlink" title="一：常规安装方式"></a>一：常规安装方式</h2><p>建议windows下安装，方便操作及使用系统，同时安装也非常简单。</p>
<p>以下安装及运行以windows为例进行介绍。</p>
<h3 id="1-安装python"><a href="#1-安装python" class="headerlink" title="1.安装python"></a>1.安装python</h3><p>项目开发使用python 3.11，建议最新版。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）在官网 http<span class="variable">s:</span>//www.<span class="keyword">python</span>.org/downloads/ 下载安装包，一键安装即可，安装切记勾选自动设置环境变量。</span><br><span class="line">（<span class="number">2</span>）配置永久全局国内镜像库（因为有墙，无法正常安装库文件），执行如下dos命令：</span><br><span class="line"><span class="keyword">python</span> pip config --<span class="keyword">global</span> <span class="keyword">set</span>  <span class="keyword">global</span>.<span class="built_in">index</span>-url http<span class="variable">s:</span>//mirrors.aliyun.<span class="keyword">com</span>/pypi/simple/</span><br><span class="line"># 如果你只想为当前用户设置，你也可以去掉下面的<span class="string">"--global"</span>选项</span><br></pre></td></tr></table></figure>
<h3 id="2-安装mysql"><a href="#2-安装mysql" class="headerlink" title="2.安装mysql"></a>2.安装mysql</h3><p>建议最新版。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在官网 https:<span class="regexp">//</span>dev.mysql.com<span class="regexp">/downloads/my</span>sql<span class="regexp">/ 下载安装包，一键安装即可。</span></span><br></pre></td></tr></table></figure>
<h3 id="3-安装依赖库"><a href="#3-安装依赖库" class="headerlink" title="3.安装依赖库"></a>3.安装依赖库</h3><p>依赖库都是目前最新版本。</p>
<p>a.安装依赖库：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#dos切换到本系统的根目录，执行下面命令：</span></span><br><span class="line">python pip <span class="keyword">install</span> -r requirements.txt</span><br></pre></td></tr></table></figure>
<p>b.若想升级项目依赖库至最新版，可以通过下面方法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python pip <span class="keyword">install</span> <span class="comment">--upgrade -r requirements.txt</span></span><br></pre></td></tr></table></figure>
<p>c.若扩展了本项目，可以通过下面方法生成项目依赖：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用pipreqs生成项目相关依赖的requirements.txt</span></span><br><span class="line"></span><br><span class="line">python pip install pipreqs</span><br><span class="line"><span class="comment"># 安装pipreqs，若有安装可跳过</span></span><br><span class="line"></span><br><span class="line">python  pipreqs <span class="params">--encoding</span> utf-8 <span class="params">--force</span> <span class="string">./</span> </span><br><span class="line"><span class="comment"># 本项目是utf-8编码</span></span><br></pre></td></tr></table></figure>
<h3 id="4-安装-talib"><a href="#4-安装-talib" class="headerlink" title="4.安装 talib"></a>4.安装 talib</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">第一种方法. pip 下安装</span><br><span class="line">（<span class="number">1</span>）<span class="symbol">https:</span>/<span class="regexp">/www.ta-lib.org/</span>下载并解压ta-<span class="class"><span class="keyword">lib</span>-0.4.0-<span class="title">msvc</span>.<span class="title">zip</span></span></span><br><span class="line">（<span class="number">2</span>）解压并将ta_lib放在C盘根目录</span><br><span class="line">（<span class="number">3</span>）<span class="symbol">https:</span>/<span class="regexp">/visualstudio.microsoft.com/zh</span>-hans/downloads/下载并安装Visual Studio Community，安装切记勾选Visual C++功能</span><br><span class="line">（<span class="number">4</span>）Build TA-Lib Library <span class="comment"># 构建 TA-Lib 库</span></span><br><span class="line">    ①在开始菜单中搜索并打开[Native Tools Command Prompt](根据操作系统选择<span class="number">32</span>位或<span class="number">64</span>位)</span><br><span class="line">    ②输入 cd <span class="symbol">C:</span>\ta-<span class="class"><span class="keyword">lib</span>\<span class="title">c</span>\<span class="title">make</span>\<span class="title">cdr</span>\<span class="title">win32</span>\<span class="title">msvc</span></span></span><br><span class="line">    ③构建库，输入 nmake</span><br><span class="line">（<span class="number">5</span>）安装完成。</span><br><span class="line">第二种方法. Anaconda 下安装</span><br><span class="line">（<span class="number">1</span>）打开Anaconda Prompt终端。</span><br><span class="line">（<span class="number">2</span>）在终端输入命令行conda install -c conda-forge ta-<span class="class"><span class="keyword">lib</span> 。</span></span><br><span class="line">（<span class="number">3</span>）此处确认是否继续安装？输入y 继续安装，直到完成</span><br><span class="line">（<span class="number">4</span>）安装完成。</span><br></pre></td></tr></table></figure>
<h3 id="5-安装-Navicat（可选）"><a href="#5-安装-Navicat（可选）" class="headerlink" title="5.安装 Navicat（可选）"></a>5.安装 Navicat（可选）</h3><p>Navicat可以方便管理数据库，以及可以手工对数据进行查看、处理、分析、挖掘。</p>
<p>Navicat是一套可创建多个连接的数据库管理工具，用以方便管理 MySQL、Oracle、PostgreSQL、SQLite、SQL Server、MariaDB 和 MongoDB 等不同类型的数据库</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）在官网 http<span class="variable">s:</span>//www.navicat.<span class="keyword">com</span>.<span class="keyword">cn</span>/download/navicat-premium 下载安装包，一键安装即可。</span><br><span class="line"></span><br><span class="line">（<span class="number">2</span>）然后下载破解补丁: http<span class="variable">s:</span>//pan.baidu.<span class="keyword">com</span>/s/<span class="number">18</span>XpTHrm9OiLEl3u6z_uxnw 提取码: <span class="number">8888</span> ，破解即可。</span><br></pre></td></tr></table></figure>
<h3 id="6-配置数据库"><a href="#6-配置数据库" class="headerlink" title="6.配置数据库"></a>6.配置数据库</h3><p>一般可能会修改的信息是”数据库访问密码“。</p>
<p>修改database.py相关信息:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db_host = <span class="string">"localhost"</span>  <span class="comment"># 数据库服务主机</span></span><br><span class="line">db_user = <span class="string">"root"</span>  <span class="comment"># 数据库访问用户</span></span><br><span class="line">db_password = <span class="string">"root"</span>  <span class="comment"># 数据库访问密码</span></span><br><span class="line">db_port = 3306  <span class="comment"># 数据库服务端口</span></span><br><span class="line">db_charset = <span class="string">"utf8mb4"</span>  <span class="comment"># 数据库字符集</span></span><br></pre></td></tr></table></figure>
<h3 id="7-安装自动交易（可选）"><a href="#7-安装自动交易（可选）" class="headerlink" title="7.安装自动交易（可选）"></a>7.安装自动交易（可选）</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.安装交易软件</span><br><span class="line">    <span class="number">1.1</span> 通用同花顺客户端券商的客户</span><br><span class="line">        通用同花顺客户端:</span><br><span class="line">        http<span class="variable">s:</span>//activity.ths123.<span class="keyword">com</span>/acmake/cache/<span class="number">1361</span>.html</span><br><span class="line">    <span class="number">1.2</span> 专用同花顺客户端券商的客户</span><br><span class="line">        自行去券商官网找同花顺专用版</span><br><span class="line">        例如：广发的下载核新独立委托端(同花顺版):</span><br><span class="line">        http://www.gf.<span class="keyword">com</span>.<span class="keyword">cn</span>/softdownload/<span class="built_in">index</span>?<span class="keyword">tab</span>=<span class="number">1</span></span><br><span class="line"><span class="number">2</span>.安装tesseract(自动识别验证码)</span><br><span class="line">    第一种方法.下载编译好的</span><br><span class="line">        在下面链接页，根据操作系统选择相应版本</span><br><span class="line">        http<span class="variable">s:</span>//digi.bib.uni-mannheim.de/tesseract/</span><br><span class="line">    第二种方法.用源码编译</span><br><span class="line">        下载源码：http<span class="variable">s:</span>//github.<span class="keyword">com</span>/tesseract-ocr/tesseract</span><br><span class="line">    注意：</span><br><span class="line">        安装完要将安装路径设置到PATH环境变量里。</span><br><span class="line">        下面提供dos命令设置，以管理员身份运行cmd，输入:</span><br><span class="line">        setx /<span class="keyword">m</span> PATH <span class="string">"%PATH%;C:\Program Files\Tesseract-OCR"</span></span><br><span class="line"><span class="number">3</span>.设置交易配置   </span><br><span class="line">    <span class="number">3.1</span>.修改trade_client.json</span><br><span class="line">        <span class="string">"user"</span>: <span class="string">"888888888888"</span>,               #交易账号</span><br><span class="line">        <span class="string">"password"</span>: <span class="string">"888888"</span>,                 #交易密码</span><br><span class="line">        <span class="string">"exe_path"</span>: <span class="string">"C:/gfzqrzrq/xiadan.exe"</span>  #交易软件路径</span><br><span class="line">    <span class="number">3.2</span>.修改trade_service.<span class="keyword">py</span></span><br><span class="line">        broker = <span class="string">'gf_client'</span> #这是广发</span><br><span class="line">        详情参阅usage.md，配置对应券商</span><br></pre></td></tr></table></figure>
<h3 id="8-运行说明"><a href="#8-运行说明" class="headerlink" title="8.运行说明"></a>8.运行说明</h3><h4 id="8-1-执行数据抓取、处理、分析、识别"><a href="#8-1-执行数据抓取、处理、分析、识别" class="headerlink" title="8.1.执行数据抓取、处理、分析、识别"></a>8.1.执行数据抓取、处理、分析、识别</h4><p>支持批量作业，具体参见run_job.bat中的注释说明。</p>
<p>建议将其加入到任务计划中，工作日的每天17：00执行。</p>
<p><strong>数据抓取、处理原则：</strong></p>
<p>1).开盘即有且无历史数据的：每日股票数据、龙虎榜；</p>
<p>2).收盘即有且有历史数据的：股票指标数据、股票K线形态、股票策略数据；</p>
<p>3).收盘后1~2小时才有且有历史数据的：大宗交易。</p>
<p>运行run_job.bat，会依据上面原则获取各模块当前或前个交易日的数据。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行 <span class="selector-tag">run_job</span><span class="selector-class">.bat</span></span><br></pre></td></tr></table></figure>
<p>若想看开盘后的当前实时数据，可以运行下面，很快大概1秒：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基础数据作业 </span></span><br><span class="line"><span class="attribute">python</span> basic_data_daily_job.py</span><br></pre></td></tr></table></figure>
<h4 id="8-2-启动web服务"><a href="#8-2-启动web服务" class="headerlink" title="8.2.启动web服务"></a>8.2.启动web服务</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行 <span class="selector-tag">run_web</span><span class="selector-class">.bat</span></span><br></pre></td></tr></table></figure>
<p>启动服务后，打开浏览器，输入：<a href="http://localhost:9988/" target="_blank" rel="noopener">http://localhost:9988/</a> ，即可使用本系统的可视化功能。</p>
<h4 id="8-3-启动交易服务"><a href="#8-3-启动交易服务" class="headerlink" title="8.3.启动交易服务"></a>8.3.启动交易服务</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">运行 <span class="selector-tag">run_trade</span><span class="selector-class">.bat</span></span><br></pre></td></tr></table></figure>
<h2 id="二：docker镜像安装方式"><a href="#二：docker镜像安装方式" class="headerlink" title="二：docker镜像安装方式"></a>二：docker镜像安装方式</h2><p>没有docker环境，可以参考：<a href="https://www.ljjyy.com/archives/2019/10/100590.html">VirtualBox虚拟机安装Ubuntu</a>，里面也介绍了python、docker等常用软件的安装，若想在Windows下安装docker自行百度。</p>
<h3 id="1-安装数据库镜像"><a href="#1-安装数据库镜像" class="headerlink" title="1.安装数据库镜像"></a>1.安装数据库镜像</h3><p>如果已经有Mysql、mariadb数据库可以跳过本步。</p>
<p>运行下面命令：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name InStockDbService \</span><br><span class="line">    -v /data/mariadb/<span class="symbol">data:</span>/var/<span class="class"><span class="keyword">lib</span>/<span class="title">instockdb</span> \</span></span><br><span class="line">    -e MYSQL_ROOT_PASSWORD=root \</span><br><span class="line">    -p <span class="number">9966</span>:<span class="number">3306</span> \</span><br><span class="line">    library/<span class="symbol">mariadb:</span>latest</span><br></pre></td></tr></table></figure>
<h3 id="2-安装本系统镜像"><a href="#2-安装本系统镜像" class="headerlink" title="2.安装本系统镜像"></a>2.安装本系统镜像</h3><p>a.若按上面【1.安装数据库镜像】装的数据库，运行下面命令：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="builtin-name">run</span> -dit --name InStock <span class="attribute">--link</span>=InStockDbService \</span><br><span class="line">    -p 9988:9988 \</span><br><span class="line">    -e <span class="attribute">db_host</span>=InStockDbService \</span><br><span class="line">    -e <span class="attribute">db_user</span>=root \</span><br><span class="line">    -e <span class="attribute">db_password</span>=root \</span><br><span class="line">    -e <span class="attribute">db_database</span>=instockdb \</span><br><span class="line">    -e <span class="attribute">db_port</span>=9966 \</span><br><span class="line">    mayanghua/instock:latest</span><br></pre></td></tr></table></figure>
<p>b.已经有Mysql、mariadb数据库，运行下面命令：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="builtin-name">run</span> -dit --name InStock \</span><br><span class="line">    -p 9988:9988 \</span><br><span class="line">    -e <span class="attribute">db_host</span>=localhost \</span><br><span class="line">    -e <span class="attribute">db_user</span>=root \</span><br><span class="line">    -e <span class="attribute">db_password</span>=root \</span><br><span class="line">    -e <span class="attribute">db_database</span>=instockdb \</span><br><span class="line">    -e <span class="attribute">db_port</span>=3306 \</span><br><span class="line">    mayanghua/instock:latest</span><br></pre></td></tr></table></figure>
<p>docker -e 参数说明：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">db_host</span>       <span class="comment"># 数据库服务主机</span></span><br><span class="line">db_user       <span class="comment"># 数据库访问用户</span></span><br><span class="line">db_password   <span class="comment"># 数据库访问密码</span></span><br><span class="line">db_database   <span class="comment"># 数据库名称</span></span><br><span class="line">db_port       <span class="comment"># 数据库服务端口</span></span><br></pre></td></tr></table></figure>
<p>按自己数据库实际情况配置参数。</p>
<h3 id="3-系统运行"><a href="#3-系统运行" class="headerlink" title="3. 系统运行"></a>3. 系统运行</h3><p>启动容器后，会自动运行，首先会初始化数据、启动web服务。然后每小时执行“基础数据抓取”，每天17:30执行所有的数据抓取、处理、分析、识别。</p>
<p>打开浏览器，输入：<a href="http://localhost:9988/" target="_blank" rel="noopener">http://localhost:9988/</a> ，即可使用本系统的可视化功能。</p>
<h3 id="4-若想查看日志"><a href="#4-若想查看日志" class="headerlink" title="4.若想查看日志"></a>4.若想查看日志</h3><p>运行下面命令：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it InStock bash </span><br><span class="line"><span class="built_in">cat</span> InStock/instock/<span class="built_in">log</span>/stock_execute_job.<span class="built_in">log</span></span><br><span class="line"><span class="built_in">cat</span> InStock/instock/<span class="built_in">log</span>/stock_web.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<h3 id="5-docker常用命令"><a href="#5-docker常用命令" class="headerlink" title="5.docker常用命令"></a>5.docker常用命令</h3><p>具体参见：<a href="https://www.ljjyy.com/archives/2018/06/100208.html">Docker基础之 二.镜像及容器的基本操作</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="/" target="_blank">Ljjyy.com</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/archives/2023/04/100686.html" class="pre-post btn btn-default" title='平滑异同移动平均线MACD'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">平滑异同移动平均线MACD</span>
        </a>
    
    
        <a href="/archives/2022/07/100684.html" class="next-post btn btn-default" title='设计模式（Design pattern）'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">设计模式（Design pattern）</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '5MzTXYXkt03k101j0PmSDN34-gzGzoHsz',
            appKey: 'iwjYgwno6qj3wtDVVSbe8nYQ',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#功能介绍"><span class="toc-text">功能介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一：股票每日数据"><span class="toc-text">一：股票每日数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二：股票指标计算"><span class="toc-text">二：股票指标计算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三：判断买入卖出的股票"><span class="toc-text">三：判断买入卖出的股票</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四：K线形态识别"><span class="toc-text">四：K线形态识别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五：策略选股"><span class="toc-text">五：策略选股</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六：选股验证"><span class="toc-text">六：选股验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七：自动交易"><span class="toc-text">七：自动交易</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八：关注功能"><span class="toc-text">八：关注功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九：支持批量"><span class="toc-text">九：支持批量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十：存储采用数据库设计"><span class="toc-text">十：存储采用数据库设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十一：展示采用web设计"><span class="toc-text">十一：展示采用web设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十二：运行高效"><span class="toc-text">十二：运行高效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十三：方便调试"><span class="toc-text">十三：方便调试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#安装说明"><span class="toc-text">安装说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一：常规安装方式"><span class="toc-text">一：常规安装方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-安装python"><span class="toc-text">1.安装python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-安装mysql"><span class="toc-text">2.安装mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-安装依赖库"><span class="toc-text">3.安装依赖库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-安装-talib"><span class="toc-text">4.安装 talib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-安装-Navicat（可选）"><span class="toc-text">5.安装 Navicat（可选）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-配置数据库"><span class="toc-text">6.配置数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-安装自动交易（可选）"><span class="toc-text">7.安装自动交易（可选）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-运行说明"><span class="toc-text">8.运行说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-执行数据抓取、处理、分析、识别"><span class="toc-text">8.1.执行数据抓取、处理、分析、识别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-启动web服务"><span class="toc-text">8.2.启动web服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-启动交易服务"><span class="toc-text">8.3.启动交易服务</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二：docker镜像安装方式"><span class="toc-text">二：docker镜像安装方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-安装数据库镜像"><span class="toc-text">1.安装数据库镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-安装本系统镜像"><span class="toc-text">2.安装本系统镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-系统运行"><span class="toc-text">3. 系统运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-若想查看日志"><span class="toc-text">4.若想查看日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-docker常用命令"><span class="toc-text">5.docker常用命令</span></a></li></ol></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019-2023&emsp;<a href="/" class="copyright-links" target="_blank" rel="nofollow">Ljjyy.com</a>
                </span> |
                <span>
                    <a href="/about/" class="copyright-links" target="_blank" rel="nofollow">关于我们</a>
                </span> |                
                <span>
                    <a href="/sitemap.xml" class="copyright-links" target="_blank" rel="nofollow">网站地图</a>
                </span> |
                <span>
                    <a href="/archives/" class="copyright-links" target="_blank" rel="nofollow">时间轴</a>
                </span>              
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>