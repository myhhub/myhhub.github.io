<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://www.ljjyy.com">
    <!--SEO-->

    <meta name="keywords" content="java,stackoverflow">


    <meta name="description" content="问题如何避免在JSP文件中使用Java代码？
我对Java EE不是很熟悉，我知道类似如下的三行代码123&lt;%= x+1 %&gt;&lt;%= request.getParameter(...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>如何避免在JSP文件中使用Java代码 | 来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</title>


    <link rel="alternate" href="/atom.xml" title="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
        <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
        <script>LA.init({id: "JgbNOaw1xxsmUUsQ",ck: "JgbNOaw1xxsmUUsQ"})</script>
	</div>






    
    <meta name="baidu-site-verification" content="dTHILoORpx">


    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  >
    <div class="main-header-box">
        <!--a class="header-avatar" href="/" title='Ljjyy.com'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a-->
        <div class="branding">
            
                <h2> 多读书多实践，勤思考善领悟 </h2>
            
    	  </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="web-logo"  href="/" title='Ljjyy.com'></a>
                    <!--a class="navbar-brand" href="https://www.ljjyy.com">来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</a-->
                </div>
                <div class="collapse navbar-collapse" id="main-menu" style="">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/cloud/"><i class="fa "></i>云计算</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/front/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/back/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/devops/"><i class="fa "></i>运维</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/crack/"><i class="fa "></i>破解</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/penetration/"><i class="fa "></i>渗透</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/tool/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/other/"><i class="fa "></i>其他</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="如何避免在JSP文件中使用Java代码">
            
	            如何避免在JSP文件中使用Java代码
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/back/">后端</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/java/">java</a> <a class="tag-link" href="/tags/stackoverflow/">stackoverflow</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/04/25</span>
        </span>
        
    
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>1609</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>如何避免在JSP文件中使用Java代码？</p>
<p>我对Java EE不是很熟悉，我知道类似如下的三行代码<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= x+<span class="number">1</span> %&gt;</span><br><span class="line">&lt;%= request.getParameter(<span class="string">"name"</span>) %&gt;</span><br><span class="line">&lt;%! counter++; %&gt;</span><br></pre></td></tr></table></figure></p>
<p>这三行代码是学校教的老式代码。在JSP 2，存在一些方法可以避免在JSP文件中使用Java代码。有人可以告诉我在JSP 2中如何避免使用Java代码吗，这些方法该如何使用？</p>
<h2 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h2><p>在大约十年前，taglibs（比如JSTL）和EL（EL表达式，<code>${}</code>）诞生的时候，在JSP中使用scriptlets（类似<code>&lt;% %&gt;</code>）这种做法，就确实已经是不被鼓励使用的做法了。</p>
<p>scriptlets 主要的缺点有：</p>
<ol>
<li><strong>重用性</strong> ：你不可以重用scriptlets</li>
<li><strong>可替换性</strong> ：你不可以让scriptlets抽象化</li>
<li><strong>面向对象能力</strong> ：你不可以使用继承或组合</li>
<li><strong>调试性</strong> ：如果scriptlets中途抛出了异常，你只能获得一个空白页</li>
<li><strong>可测试性</strong> ：scriptlets不能进行单元测试</li>
<li><strong>可维护性</strong> ：（这句有些词语不确定）需要更多的时间去维护混合的/杂乱的/冲突的 代码逻辑</li>
</ol>
<p>Oracle自己也在 <a href="http://www.oracle.com/technetwork/articles/javase/code-convention-138726.html" target="_blank" rel="noopener">JSP coding conventions</a>一文中推荐在功能可以被标签库所替代的时候避免使用scriptlets语法。以下引用它提出的几个观点：</p>
<blockquote>
<p>在JSP 1.2规范中，强烈推荐使用JSTL来减少JSP scriptlets语法的使用。一个使用JSTL的页面，总得来说会更加地容易阅读和维护。</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<blockquote>
<p>在任何可能的地方，当标签库能够提供相同的功能时，尽量避免使用JSP scriptlets语法。这会让页面更加容易阅读和维护，帮助将 业务逻辑 从 表现层逻辑 中分离，也会让页面往更符合JSP 2.0风格的方向发展（JSP 2.0规范中，支持但是极大弱化了JSP scriptlets语法）</p>
</blockquote>
<blockquote>
<p>…</p>
</blockquote>
<blockquote>
<p>本着适应 模型-显示层-控制器（MVC） 设计模式中关于减少业务逻辑层与显示层之间的耦合的精神，<strong>JSP scriptlets语法不应该</strong>被用来编写业务逻辑。相应的，JSP scriptlets语法在传送一些服务端返回的处理客户端请求的数据（也称为value objects）的时候会被使用。尽管如此，使用一个controller servlet来处理或者用自定义标签来处理会更好。</p>
</blockquote>
<hr>
<p><strong>如何替换scriptlets语句，取决于代码/逻辑的目的。更常见的是，被替换的语句会被放在另外的一些更值得放的Java类里</strong>（这里翻译得不一定清楚）</p>
<ul>
<li>如果你想在每个请求、每个页面请求都运行<strong>相同的</strong>Java代码，，比如说 检查一个用户是否在登录状态，就要实现一个 过滤器，在doFilter()方法中编写正确的代码，例如</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (((HttpServletRequest) request).getSession().getAttribute(<span class="string">"user"</span>) == <span class="keyword">null</span>) &#123;</span><br><span class="line">        ((HttpServletResponse) response).sendRedirect(<span class="string">"login"</span>); <span class="comment">// Not logged in, redirect to login page.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        chain.doFilter(request, response); <span class="comment">// Logged in, just continue request.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当你在<code>&lt;url-pattern&gt;</code>中做好恰当的地址映射，覆盖所有应该被覆盖的JSP文件，也就不需要再JSP文件中添加这些相同的Java代码</p>
<hr>
<ul>
<li>如果你想执行一些Java代码来<strong>预处理</strong>一个请求，例如，预加载某些从数据库加载的数据来显示在一些表格里，可能还会有一些查询参数，那么，实现一个Servlet，在doGet()方法里编写正确的代码，例如</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        List&lt;Product&gt; products = productService.list(); <span class="comment">// Obtain all products.</span></span><br><span class="line">        request.setAttribute(<span class="string">"products"</span>, products); <span class="comment">// Store products in request scope.</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/WEB-INF/products.jsp"</span>).forward(request, response); <span class="comment">// Forward to JSP page to display them in a HTML table.</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">"Retrieving products failed!"</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个方法能够更方便地处理异常。这样会在渲染、展示JSP页面时访问数据库。在数据库抛出异常的时候，你可以根据情况返回不同的响应或页面。在上面的例子，出错时默认会展示500页面，你也可以改变<code>web.xml</code>的<code>&lt;error-page&gt;</code>来自定义异常处理错误页。</p>
<hr>
<ul>
<li>如果你想执行一些Java代码来<strong>后置处理（postprocess）</strong>一个请求，例如处理表单提交，那么，实现一个Servlet，在doPost()里写上正确的代码：</li>
</ul>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> doPost(HttpServletRequest request, HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="keyword">String</span> username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    <span class="keyword">String</span> password = request.getParameter(<span class="string">"password"</span>);</span><br><span class="line">    User user = userService.find(username, password);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">        request.getSession().setAttribute(<span class="string">"user"</span>, user); <span class="comment">// Login user.</span></span><br><span class="line">        response.sendRedirect(<span class="string">"home"</span>); <span class="comment">// Redirect to home page.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        request.setAttribute(<span class="string">"message"</span>, <span class="string">"Unknown username/password. Please retry."</span>); <span class="comment">// Store error message in request scope.</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">"/WEB-INF/login.jsp"</span>).forward(request, response); <span class="comment">// Forward to JSP page to redisplay login form with error.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个处理不同目标结果页的方法会比原来更加简单： 可以显示一个带有表单验证错误提示的表单（在这个特别的例子中，你可以用EL表达式<code>${message}</code>来显示错误提示），或者仅仅跳转到成功的页面</p>
<hr>
<ul>
<li>如果你想执行一些Java代码来<strong>控制</strong>执行计划（control the execution plan） 和/或 request和response的跳转目标，用<a href="http://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/3542297#3542297" target="_blank" rel="noopener">MVC模式</a>实现一个Servlet，例如：<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">protected void service(HttpServletRequest <span class="built_in">request</span>, HttpServletResponse <span class="built_in">response</span>) throws ServletException, IOException &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        Action action = ActionFactory.getAction(<span class="built_in">request</span>);</span><br><span class="line">        <span class="built_in">String</span> view = action.<span class="keyword">execute</span>(<span class="built_in">request</span>, <span class="built_in">response</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (view.equals(<span class="built_in">request</span>.getPathInfo().substring(<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="built_in">request</span>.getRequestDispatcher(<span class="string">"/WEB-INF/"</span> + view + <span class="string">".jsp"</span>).forward(<span class="built_in">request</span>, <span class="built_in">response</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">response</span>.sendRedirect(view);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        throw <span class="keyword">new</span> ServletException(<span class="string">"Executing action failed."</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>或者使用一些MVC框架例如<a href="http://stackoverflow.com/tags/jsf/info" target="_blank" rel="noopener">JSF</a>, <a href="http://stackoverflow.com/tags/spring-mvc/info" target="_blank" rel="noopener">Spring MVC</a>, <a href="http://stackoverflow.com/tags/wicket/info" target="_blank" rel="noopener">Wicket</a> 这样你就不用自定义servlet，只要写一些页面和javabean class就可以了。</p>
<hr>
<ul>
<li>如果你想执行一些Java代码来<strong>控制JSP页面的数据渲染流程（control the flow inside a JSP page）</strong>，那么你需要使用一些（已经存在的）流程控制标签库，比如<a href="http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/tld-summary.html" target="_blank" rel="noopener">JSTL core</a>，例如，在一个表格显示<code>List&lt;Product&gt;</code></li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">taglib</span> <span class="attr">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> <span class="attr">prefix</span>=<span class="string">"c"</span> %&gt;</span></span></span><br><span class="line"><span class="xml">...</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;products&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">var</span>=<span class="string">"product"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$</span><span class="template-variable">&#123;product.name&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$</span><span class="template-variable">&#123;product.description&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$</span><span class="template-variable">&#123;product.price&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>这些XML风格的标签可以很好地适应HTML代码，代码变得更好阅读（也因此更好地维护），相比于杂乱无章的scriptlets 的分支大括号（Where the heck does this closing brace belong to?”(到底这个结束大括号是属于哪个代码段的？)）。一个简单的设置可以配置你的Web程序让在使用scriptlets 的时候自动抛出异常</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-property-group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scripting-invalid</span>&gt;</span>true<span class="tag">&lt;/<span class="name">scripting-invalid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jsp-property-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp-config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在JSP的继承者<a href="http://stackoverflow.com/tags/facelets/info" target="_blank" rel="noopener">Facelets</a>里（Java EE提供的MVC框架<a href="http://stackoverflow.com/tags/jsf/info" target="_blank" rel="noopener">JSF</a>），已经<strong>不</strong>可能使用scriptlets语法了。这是一个让你强制使用“正确的方法”的方法</p>
<hr>
<ul>
<li>如果你想执行一些Java代码来在JSP中 <strong>访问和显示</strong> 一些“后端”数据，你需要使用EL（表达式），<code>${}</code>，例如，显示已经提交了的数值：</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="attribute">type</span>=<span class="string">"text"</span> <span class="attribute">name</span>=<span class="string">"foo"</span> <span class="attribute">value</span>=<span class="string">"<span class="variable">$&#123;param.foo&#125;</span>"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p><code>${param.foo}</code>会显示<code>request.getParameter(&quot;foo&quot;)</code>这句话的输出结果。</p>
<hr>
<ul>
<li>如果你想在JSP直接执行一些工具类Java代码（典型的，一些public static方法），你需要定义它，并使用EL表达式函数。这是JSTL里的标准函数标签库，但是你也可以<a href="http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaiq" target="_blank" rel="noopener">轻松地创建自己需要的功能</a>，下面是一个使用有用的<code>fn:escapeXml</code>来避免XSS攻击的例子。</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib <span class="attribute">uri</span>=<span class="string">"http://java.sun.com/jsp/jstl/functions"</span> <span class="attribute">prefix</span>=<span class="string">"fn"</span> %&gt;</span><br><span class="line"><span class="built_in">..</span>.</span><br><span class="line">&lt;input <span class="attribute">type</span>=<span class="string">"text"</span> <span class="attribute">name</span>=<span class="string">"foo"</span> <span class="attribute">value</span>=<span class="string">"<span class="variable">$&#123;fn:escapeXml(param.foo)&#125;</span>"</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>注意，XSS并不是Java/JSP/JSTL/EL/任何技术相关的东西，这个问题是<strong>任何</strong>Web应用程序都需要关心的问题，scriptlets 并没有为这个问题提供良好的解决方案，至少没有标准的Java API的解决方案。JSP的继承者Facelets内含了HTML转义功能，所以在Facelets里你不用担心XSS攻击的问题。</p>
<p>See Also:</p>
<ul>
<li><a href="http://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp/2097732#2097732" target="_blank" rel="noopener">JSP, Servlet, JSF的不同点在哪里？</a></li>
<li><a href="http://stackoverflow.com/questions/3106452/java-servlet-instantiation-and-session-variables/3106909#3106909" target="_blank" rel="noopener">Servlet, ServletContext, HttpSession 和 HttpServletRequest/Response 是如何工作的?</a></li>
<li><a href="http://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc" target="_blank" rel="noopener">JSP, Servlet and JDBC的基本MVC例子</a></li>
<li><a href="http://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/" target="_blank" rel="noopener">Java Web应用程序中的设计模式</a></li>
<li><a href="http://balusc.blogspot.com/2010/01/hidden-features-of-jspservlet.html" target="_blank" rel="noopener">JSP/Servlet中的隐藏功能</a></li>
</ul>
<p>stackoverflow原址：<a href="http://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files" target="_blank" rel="noopener">http://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="/" target="_blank">Ljjyy.com</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/archives/2019/04/100266.html" class="pre-post btn btn-default" title='JUnit4如何断言确定异常的抛出'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">JUnit4如何断言确定异常的抛出</span>
        </a>
    
    
        <a href="/archives/2019/04/100264.html" class="next-post btn btn-default" title='如何便捷地将两个数组合到一起'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">如何便捷地将两个数组合到一起</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '5MzTXYXkt03k101j0PmSDN34-gzGzoHsz',
            appKey: 'iwjYgwno6qj3wtDVVSbe8nYQ',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-text">问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#回答"><span class="toc-text">回答</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019-2023&emsp;<a href="/" class="copyright-links" target="_blank" rel="nofollow">Ljjyy.com</a>
                </span> |
                <span>
                    <a href="/about/" class="copyright-links" target="_blank" rel="nofollow">关于我们</a>
                </span> |                
                <span>
                    <a href="/sitemap.xml" class="copyright-links" target="_blank" rel="nofollow">网站地图</a>
                </span> |
                <span>
                    <a href="/archives/" class="copyright-links" target="_blank" rel="nofollow">时间轴</a>
                </span>              
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>