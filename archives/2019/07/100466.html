<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://www.ljjyy.com">
    <!--SEO-->

    <meta name="keywords" content="hadoop,flink">


    <meta name="description" content="Flink可在Linux，Mac OS X和Windows上运行。为了能够运行Flink，唯一的要求是安装一个有效的Java 8.x. 
在Linux，Mac OS X上设置：下载并启动Flin...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>Flink本地安装 | 来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</title>


    <link rel="alternate" href="/atom.xml" title="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
        <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
        <script>LA.init({id: "JgbNOaw1xxsmUUsQ",ck: "JgbNOaw1xxsmUUsQ"})</script>
	</div>






    
    <meta name="baidu-site-verification" content="dTHILoORpx">


    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  >
    <div class="main-header-box">
        <!--a class="header-avatar" href="/" title='Ljjyy.com'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a-->
        <div class="branding">
            
                <h2> 多读书多实践，勤思考善领悟 </h2>
            
    	  </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="web-logo"  href="/" title='Ljjyy.com'></a>
                    <!--a class="navbar-brand" href="https://www.ljjyy.com">来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</a-->
                </div>
                <div class="collapse navbar-collapse" id="main-menu" style="">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/cloud/"><i class="fa "></i>云计算</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/front/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/back/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/devops/"><i class="fa "></i>运维</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/crack/"><i class="fa "></i>破解</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/penetration/"><i class="fa "></i>渗透</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/tool/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/other/"><i class="fa "></i>其他</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Flink本地安装">
            
	            Flink本地安装
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/cloud/">云计算</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/flink/">flink</a> <a class="tag-link" href="/tags/hadoop/">hadoop</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/07/20</span>
        </span>
        
    
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>1430</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <p>Flink可在<strong>Linux，Mac OS X和Windows上运行</strong>。为了能够运行Flink，唯一的要求是安装一个有效的<strong><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">Java</a> 8.x.</strong> </p>
<h1 id="在Linux，Mac-OS-X上"><a href="#在Linux，Mac-OS-X上" class="headerlink" title="在Linux，Mac OS X上"></a>在Linux，Mac OS X上</h1><h2 id="设置：下载并启动Flink"><a href="#设置：下载并启动Flink" class="headerlink" title="设置：下载并启动Flink"></a>设置：下载并启动Flink</h2><p>您可以通过发出以下命令来检查Java正确安装：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -<span class="built_in">version</span></span><br></pre></td></tr></table></figure>
<p>如果你有Java 8，输出将如下所示：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java version <span class="string">"1.8.0_111"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_111-b14)</span><br><span class="line">Java HotSpot(TM) 64-Bit<span class="built_in"> Server </span>VM (build 25.111-b14, mixed mode)</span><br></pre></td></tr></table></figure>
<h2 id="下载并编译"><a href="#下载并编译" class="headerlink" title="下载并编译"></a>下载并编译</h2><p>从官网某个<a href="http://flink.apache.org/community.html#source-code" target="_blank" rel="noopener">存储</a>库克隆源代码，例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/apache/flink.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> flink</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mvn clean package -DskipTests <span class="comment"># this will take up to 10 minutes</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> build-target               <span class="comment"># this is where Flink is installed to</span></span></span><br></pre></td></tr></table></figure>
<h2 id="启动本地Flink群集"><a href="#启动本地Flink群集" class="headerlink" title="启动本地Flink群集"></a>启动本地Flink群集</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ .<span class="regexp">/bin/</span>start-cluster.sh  <span class="comment"># Start Flink</span></span><br></pre></td></tr></table></figure>
<p>检查<strong>分派器的web前端</strong>在<a href="http://localhost:8081/" target="_blank" rel="noopener">HTTP：//localhost:8081</a>，并确保一切都正常运行。Web前端应报告单个可用的TaskManager实例。</p>
<p><img src="/img/flink/jobmanager-1.png" alt></p>
<p>您还可以通过检查<code>logs</code>目录中的日志文件来验证系统是否正在运行：</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> tail <span class="built-in">log</span>/flink-*-standalonesession-*.<span class="built-in">log</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Rest endpoint listening at localhost:<span class="number">8081</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - http:<span class="comment">//localhost:8081 was granted leadership ...</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Web frontend listening at http:<span class="comment">//localhost:8081.</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Starting RPC endpoint <span class="keyword">for</span> StandaloneResourceManager at akka:<span class="comment">//flink/user/resourcemanager .</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Starting RPC endpoint <span class="keyword">for</span> StandaloneDispatcher at akka:<span class="comment">//flink/user/dispatcher .</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - ResourceManager akka.tcp:<span class="comment">//[[email protected]](/cdn-cgi/l/email-protection):6123/user/resourcemanager was granted leadership ...</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Starting the SlotManager.</span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Dispatcher akka.tcp:<span class="comment">//[[email protected]](/cdn-cgi/l/email-protection):6123/user/dispatcher was granted leadership ...</span></span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Recovering <span class="keyword">all</span> persisted jobs.</span><br><span class="line"><span class="function"><span class="title">INFO</span></span> ... - Registering TaskManager ... under ... at the SlotManager.</span><br></pre></td></tr></table></figure>
<h2 id="阅读代码"><a href="#阅读代码" class="headerlink" title="阅读代码"></a>阅读代码</h2><p>您可以在<a href="https://github.com/apache/flink/blob/master/flink-examples/flink-examples-streaming/src/main/scala/org/apache/flink/streaming/scala/examples/socket/SocketWindowWordCount.scala" target="_blank" rel="noopener">Scala</a>和<a href="https://github.com/apache/flink/blob/master/flink-examples/flink-examples-streaming/src/main/java/org/apache/flink/streaming/examples/socket/SocketWindowWordCount.java" target="_blank" rel="noopener">Java</a>上的GitHub上找到此SocketWindowWordCount示例的完整源代码。</p>
<ul>
<li><strong>Scala</strong></li>
<li><strong>Java</strong></li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">object SocketWindowWordCount &#123;</span><br><span class="line"></span><br><span class="line">    def main(args: Array[<span class="keyword">String</span>]) : Unit = &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// the port to connect to</span></span><br><span class="line">        val port: Int = <span class="built_in">try</span> &#123;</span><br><span class="line">            ParameterTool.fromArgs(args).getInt(<span class="string">"port"</span>)</span><br><span class="line">        &#125; <span class="built_in">catch</span> &#123;</span><br><span class="line">            <span class="built_in">case</span> e: Exception =&gt; &#123;</span><br><span class="line">                System.err.<span class="built_in">println</span>(<span class="string">"No port specified. Please run 'SocketWindowWordCount --port &lt;port&gt;'"</span>)</span><br><span class="line">                <span class="built_in">return</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the execution environment</span></span><br><span class="line">        val env: StreamExecutionEnvironment = StreamExecutionEnvironment.getExecutionEnvironment</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get input data by connecting to the socket</span></span><br><span class="line">        val <span class="built_in">text</span> = env.socketTextStream(<span class="string">"localhost"</span>, port, <span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// parse the data, group it, window it, and aggregate the counts</span></span><br><span class="line">        val windowCounts = <span class="built_in">text</span></span><br><span class="line">            .flatMap &#123; w =&gt; w.split(<span class="string">"\\s"</span>) &#125;</span><br><span class="line">            .<span class="built_in">map</span> &#123; w =&gt; WordWithCount(w, <span class="number">1</span>) &#125;</span><br><span class="line">            .keyBy(<span class="string">"word"</span>)</span><br><span class="line">            .timeWindow(Time.seconds(<span class="number">5</span>), Time.seconds(<span class="number">1</span>))</span><br><span class="line">            .sum(<span class="string">"count"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print the results with a single thread, rather than in parallel</span></span><br><span class="line">        windowCounts.<span class="built_in">print</span>().setParallelism(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        env.execute(<span class="string">"Socket Window WordCount"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Data type for words with count</span></span><br><span class="line">    <span class="built_in">case</span> class WordWithCount(<span class="keyword">word</span>: <span class="keyword">String</span>, count: Long)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> class SocketWindowWordCount &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// the port to connect to</span></span><br><span class="line">        final <span class="keyword">int</span> port;</span><br><span class="line">        <span class="built_in">try</span> &#123;</span><br><span class="line">            final ParameterTool params = ParameterTool.fromArgs(args);</span><br><span class="line">            port = params.getInt(<span class="string">"port"</span>);</span><br><span class="line">        &#125; <span class="built_in">catch</span> (Exception e) &#123;</span><br><span class="line">            System.err.<span class="built_in">println</span>(<span class="string">"No port specified. Please run 'SocketWindowWordCount --port &lt;port&gt;'"</span>);</span><br><span class="line">            <span class="built_in">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the execution environment</span></span><br><span class="line">        final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// get input data by connecting to the socket</span></span><br><span class="line">        DataStream&lt;<span class="keyword">String</span>&gt; <span class="built_in">text</span> = env.socketTextStream(<span class="string">"localhost"</span>, port, <span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// parse the data, group it, window it, and aggregate the counts</span></span><br><span class="line">        DataStream&lt;WordWithCount&gt; windowCounts = <span class="built_in">text</span></span><br><span class="line">            .flatMap(<span class="keyword">new</span> FlatMapFunction&lt;<span class="keyword">String</span>, WordWithCount&gt;() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> flatMap(<span class="keyword">String</span> value, Collector&lt;WordWithCount&gt; out) &#123;</span><br><span class="line">                    <span class="built_in">for</span> (<span class="keyword">String</span> <span class="keyword">word</span> : value.split(<span class="string">"\\s"</span>)) &#123;</span><br><span class="line">                        out.collect(<span class="keyword">new</span> WordWithCount(<span class="keyword">word</span>, <span class="number">1</span>L));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .keyBy(<span class="string">"word"</span>)</span><br><span class="line">            .timeWindow(Time.seconds(<span class="number">5</span>), Time.seconds(<span class="number">1</span>))</span><br><span class="line">            .reduce(<span class="keyword">new</span> ReduceFunction&lt;WordWithCount&gt;() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                <span class="keyword">public</span> WordWithCount reduce(WordWithCount a, WordWithCount b) &#123;</span><br><span class="line">                    <span class="built_in">return</span> <span class="keyword">new</span> WordWithCount(a.<span class="keyword">word</span>, a.count + b.count);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print the results with a single thread, rather than in parallel</span></span><br><span class="line">        windowCounts.<span class="built_in">print</span>().setParallelism(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        env.execute(<span class="string">"Socket Window WordCount"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Data type for words with count</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> class WordWithCount &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">String</span> <span class="keyword">word</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">long</span> count;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> WordWithCount() &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> WordWithCount(<span class="keyword">String</span> <span class="keyword">word</span>, <span class="keyword">long</span> count) &#123;</span><br><span class="line">            <span class="keyword">this</span>.<span class="keyword">word</span> = <span class="keyword">word</span>;</span><br><span class="line">            <span class="keyword">this</span>.count = count;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">String</span> toString() &#123;</span><br><span class="line">            <span class="built_in">return</span> <span class="keyword">word</span> + <span class="string">" : "</span> + count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="运行示例"><a href="#运行示例" class="headerlink" title="运行示例"></a>运行示例</h2><p>现在，我们将运行此Flink应用程序。它将从套接字读取文本，并且每5秒打印一次前5秒内每个不同单词的出现次数，即处理时间的翻滚窗口，只要文字漂浮在其中。</p>
<ul>
<li>首先，我们使用<strong>netcat</strong>来启动本地服务器</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>nc -l <span class="number">9000</span></span><br></pre></td></tr></table></figure>
<ul>
<li>提交Flink计划：</li>
</ul>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./bin/flink <span class="built_in">run</span> examples/streaming/SocketWindowWordCount.jar <span class="comment">--port 9000</span></span><br><span class="line">Starting execution <span class="keyword">of</span> program</span><br></pre></td></tr></table></figure>
<p>程序连接到套接字并等待输入。您可以检查Web界面以验证作业是否按预期运行：</p>
<p><img src="/img/flink/jobmanager-2.png" alt></p>
<p><img src="/img/flink/jobmanager-3.png" alt></p>
<ul>
<li>单词在5秒的时间窗口（处理时间，翻滚窗口）中计算并打印到<code>stdout</code>。监视TaskManager的输出文件并写入一些文本<code>nc</code>（输入在点击后逐行发送到Flink <return>）：</return></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ nc -l 9000</span><br><span class="line">lorem ipsum</span><br><span class="line">ipsum ipsum ipsum</span><br><span class="line"><span class="built_in">bye</span></span><br></pre></td></tr></table></figure>
<p>该<code>.out</code>文件将在每个时间窗口结束时，只要打印算作字浮在，例如：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tail -f log/flink-*-taskexecutor-*.<span class="keyword">out</span></span><br><span class="line">lorem : 1</span><br><span class="line">bye : 1</span><br><span class="line">ipsum : 4</span><br></pre></td></tr></table></figure>
<p>要<strong>停止</strong>Flink当你做类型：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./bin/stop-<span class="keyword">cluster</span>.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>
<h1 id="在Windows上"><a href="#在Windows上" class="headerlink" title="在Windows上"></a>在Windows上</h1><p>如果要在Windows计算机上本地运行Flink，则需要<a href="http://flink.apache.org/downloads.html" target="_blank" rel="noopener">下载</a>并解压缩二进制Flink分发。之后，您可以使用<strong>Windows批处理</strong>文件（<code>.bat</code>），或使用<strong>Cygwin</strong>运行Flink JobManager。</p>
<h2 id="从Windows批处理文件开始"><a href="#从Windows批处理文件开始" class="headerlink" title="从Windows批处理文件开始"></a>从Windows批处理文件开始</h2><p>要从<em>Windows命令行</em>启动Flink ，请打开命令窗口，导航到<code>bin/</code>Flink目录并运行<code>start-cluster.bat</code>。</p>
<p>注意：<code>bin</code>Java Runtime Environment 的文件夹必须包含在Window的<code>%PATH%</code>变量中。按照本<a href="http://www.java.com/en/download/help/path.xml" target="_blank" rel="noopener">指南</a>将Java添加到<code>%PATH%</code>变量中。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cd flink</span><br><span class="line">$ cd bin</span><br><span class="line">$ <span class="built_in">start</span>-cluster.bat</span><br><span class="line">Starting <span class="keyword">a</span> <span class="built_in">local</span> cluster <span class="keyword">with</span> <span class="literal">one</span> JobManager <span class="built_in">process</span> <span class="keyword">and</span> <span class="literal">one</span> TaskManager <span class="built_in">process</span>.</span><br><span class="line">You can terminate <span class="keyword">the</span> processes via CTRL-C <span class="keyword">in</span> <span class="keyword">the</span> spawned <span class="built_in">shell</span> windows.</span><br><span class="line">Web interface <span class="keyword">by</span> default <span class="keyword">on</span> <span class="title">http</span>://<span class="title">localhost</span>:<span class="title">8081</span>/.</span><br></pre></td></tr></table></figure>
<p>之后，您需要打开第二个终端来运行作业<code>flink.bat</code>。</p>
<h2 id="从Cygwin和Unix-Scripts开始"><a href="#从Cygwin和Unix-Scripts开始" class="headerlink" title="从Cygwin和Unix Scripts开始"></a>从Cygwin和Unix Scripts开始</h2><p>使用<em>Cygwin，</em>您需要启动Cygwin终端，导航到您的Flink目录并运行<code>start-cluster.sh</code>脚本：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">cd</span> flink</span><br><span class="line">$ bin/start-<span class="keyword">cluster</span>.<span class="keyword">sh</span></span><br><span class="line">Starting <span class="keyword">cluster</span>.</span><br></pre></td></tr></table></figure>
<h2 id="从Git安装Flink"><a href="#从Git安装Flink" class="headerlink" title="从Git安装Flink"></a>从Git安装Flink</h2><p>如果您正在从git存储库安装Flink并且您正在使用Windows git shell，则Cygwin可能会产生类似于以下的故障：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">c:</span><span class="regexp">/flink/</span>bin<span class="regexp">/start-cluster.sh: line 30: /</span>figure&gt;\r<span class="string">': command not found</span></span><br></pre></td></tr></table></figure>
<p>发生此错误是因为在Windows中运行时，git会自动将UNIX行结尾转换为Windows样式行结尾。问题是Cygwin只能处理UNIX样式的行结尾。解决方案是通过以下三个步骤调整Cygwin设置以处理正确的行结尾：</p>
<ol>
<li>启动一个Cygwin shell。</li>
<li>输入确定您的主目录</li>
</ol>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> cd; pwd </span><br><span class="line">This will <span class="keyword">return</span> a<span class="built_in"> path</span> under the Cygwin<span class="built_in"> root</span><span class="built_in"> path</span>.</span><br></pre></td></tr></table></figure>
<ol>
<li>使用NotePad，写字板或其他文本编辑器打开<code>.bash_profile</code>主目录中的文件并附加以下内容:(如果文件不存在，则必须创建它）</li>
</ol>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> SHELLOPTS</span><br><span class="line"><span class="builtin-name">set</span> -o igncr</span><br></pre></td></tr></table></figure>
<p>保存文件并打开一个新的bash shell。</p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="/" target="_blank">Ljjyy.com</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/archives/2019/07/100467.html" class="pre-post btn btn-default" title='Flink集群部署'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">Flink集群部署</span>
        </a>
    
    
        <a href="/archives/2019/07/100465.html" class="next-post btn btn-default" title='Flink内部原理'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">Flink内部原理</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '5MzTXYXkt03k101j0PmSDN34-gzGzoHsz',
            appKey: 'iwjYgwno6qj3wtDVVSbe8nYQ',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#在Linux，Mac-OS-X上"><span class="toc-text">在Linux，Mac OS X上</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置：下载并启动Flink"><span class="toc-text">设置：下载并启动Flink</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#下载并编译"><span class="toc-text">下载并编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动本地Flink群集"><span class="toc-text">启动本地Flink群集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#阅读代码"><span class="toc-text">阅读代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运行示例"><span class="toc-text">运行示例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#在Windows上"><span class="toc-text">在Windows上</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#从Windows批处理文件开始"><span class="toc-text">从Windows批处理文件开始</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从Cygwin和Unix-Scripts开始"><span class="toc-text">从Cygwin和Unix Scripts开始</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#从Git安装Flink"><span class="toc-text">从Git安装Flink</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019-2023&emsp;<a href="/" class="copyright-links" target="_blank" rel="nofollow">Ljjyy.com</a>
                </span> |
                <span>
                    <a href="/about/" class="copyright-links" target="_blank" rel="nofollow">关于我们</a>
                </span> |                
                <span>
                    <a href="/sitemap.xml" class="copyright-links" target="_blank" rel="nofollow">网站地图</a>
                </span> |
                <span>
                    <a href="/archives/" class="copyright-links" target="_blank" rel="nofollow">时间轴</a>
                </span>              
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>