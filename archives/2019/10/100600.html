<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://www.ljjyy.com">
    <!--SEO-->

    <meta name="keywords" content="知识图谱,r2rml">


    <meta name="description" content="一. 简介Direct mapping 本质上是通过编写启发式规则将数据库中的表转换为RDF三元组, 但该方式灵活性不强。这里我们用 D2RQ 工具，它的主要功能是提供以虚拟的、只读的RDF图形...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>从零开始学习知识图谱 之 十.百科知识图谱构建 4.结构化数据到RDF | 来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</title>


    <link rel="alternate" href="/atom.xml" title="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
        <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
        <script>LA.init({id: "JgbNOaw1xxsmUUsQ",ck: "JgbNOaw1xxsmUUsQ"})</script>
	</div>






    
    <meta name="baidu-site-verification" content="dTHILoORpx">


    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  >
    <div class="main-header-box">
        <!--a class="header-avatar" href="/" title='Ljjyy.com'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a-->
        <div class="branding">
            
                <h2> 多读书多实践，勤思考善领悟 </h2>
            
    	  </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="web-logo"  href="/" title='Ljjyy.com'></a>
                    <!--a class="navbar-brand" href="https://www.ljjyy.com">来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</a-->
                </div>
                <div class="collapse navbar-collapse" id="main-menu" style="">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/cloud/"><i class="fa "></i>云计算</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/front/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/back/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/devops/"><i class="fa "></i>运维</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/crack/"><i class="fa "></i>破解</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/penetration/"><i class="fa "></i>渗透</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/tool/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/other/"><i class="fa "></i>其他</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="从零开始学习知识图谱 之 十.百科知识图谱构建 4.结构化数据到RDF">
            
	            从零开始学习知识图谱 之 十.百科知识图谱构建 4.结构化数据到RDF
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/cloud/">云计算</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/r2rml/">r2rml</a> <a class="tag-link" href="/tags/knowledgegraph/">知识图谱</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/10/29</span>
        </span>
        
    
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>1577</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <h1 id="一-简介"><a href="#一-简介" class="headerlink" title="一. 简介"></a>一. 简介</h1><p>Direct mapping 本质上是通过编写启发式规则将数据库中的表转换为RDF三元组, 但该方式灵活性不强。这里我们用 D2RQ 工具，它的主要功能是提供以虚拟的、只读的RDF图形式进入到关系型数据库中。也就是说比如你通过SPARQL端口查询，输入是SPARQL查询语言，D2RQ通过mapping文件将其转换为SQL语句在关系数据库上查询，因此实际上访问的是关系型数据库。同时你也可以使用它从数据库创建 RDF 格式的文件。</p>
<p>D2RQ 由自己的mapping语言，R2RML-kit。它和W3C推荐的R2RML类似。你可以通过D2RQ提供的工具来根据数据库自动生成mapping文件。你可以根据自己的需求去修改定制自己的mapping文件。</p>
<p><img src="/img/neo4j/d2rq_architecture.png" alt><br>D2RQ 的框架图</p>
<p>本教程的项目代码放在github上，下载地址为<a href="https://github.com/myhhub/zero_knowledge_graph" target="_blank" rel="noopener">《从零开始学习知识图谱》项目源代码</a> 。</p>
<h1 id="二-环境准备"><a href="#二-环境准备" class="headerlink" title="二. 环境准备"></a>二. 环境准备</h1><h2 id="1-操作系统"><a href="#1-操作系统" class="headerlink" title="1. 操作系统"></a>1. 操作系统</h2><p>支持操作系统：windows、macOS、Linux。为了方便大家搭建开发环境，笔者尽可能在windows下构建，系列篇未特意说明时操作系统都是<strong>windows</strong>。Linux安装可以参考<a href="100590.html">VirtualBox虚拟机安装Ubuntu</a>或<a href="100589.html">VirtualBox虚拟机安装CentOS8</a>进行安装。</p>
<h2 id="2-jdk"><a href="#2-jdk" class="headerlink" title="2. jdk"></a>2. jdk</h2><p>安装参见<a href="100604.html">windows系统安装JDK</a></p>
<h2 id="3-D2RQ"><a href="#3-D2RQ" class="headerlink" title="3. D2RQ"></a>3. D2RQ</h2><p>安装参见<a href="100592.html#3-d2rq">从零开始学习知识图谱 之 二</a></p>
<h1 id="三-D2RQ-的使用"><a href="#三-D2RQ-的使用" class="headerlink" title="三. D2RQ 的使用"></a>三. D2RQ 的使用</h1><h2 id="1-生成-mapping-文件"><a href="#1-生成-mapping-文件" class="headerlink" title="1. 生成 mapping 文件"></a>1. 生成 mapping 文件</h2><p>使用 D2RQ 自带的 generate-mapping 工具， 根据数据库自动生成mapping文件。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\my\d2rq&gt; ./<span class="keyword">generate</span>-mapping -u root -p root -o kg_demo_mapping_hudong_fenlei<span class="variable">.ttl</span> jdbc:mysql:<span class="comment">///hudong_fenlei?useSSL=false</span></span><br></pre></td></tr></table></figure>
<p>其中 -u root 是数据库的用户名，-p root 是数据库的密码。 -o 指定生成 mapping 文件的名字。jdbc:mysql: /// 后面跟着的数据库的名字。 ?useSSL=false语句设置SSL为false以避免提示警告，数据库没设置主键会提示警告。 </p>
<p>注意：笔者是Windows PowerShell命令窗口运行命令，若在cmd中去掉前面的./，即：generate-mapping开始。下面的命令也如此。</p>
<p>通过上述命令，我们将得到如下的 mapping 文件：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@prefix</span> <span class="attribute">map</span>: &lt;#&gt; .</span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">db</span>: &lt;&gt; .</span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">vocab</span>: &lt;vocab/&gt; .</span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">rdf</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">rdfs</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.w3.org/2000/01/rdf-schema#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">xsd</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.w3.org/2001/XMLSchema#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">d2rq</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">jdbc</span>: &lt;<span class="attribute">http</span>:<span class="comment">//d2rq.org/terms/jdbc/&gt; .</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">map</span>:database a <span class="attribute">d2rq</span>:Database;</span><br><span class="line">	<span class="attribute">d2rq</span>:jdbcDriver <span class="string">"com.mysql.jdbc.Driver"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:jdbcDSN <span class="string">"jdbc:mysql:///hudong_fenlei?useSSL=false"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:username <span class="string">"root"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:password <span class="string">"root"</span>;</span><br><span class="line">	<span class="attribute">jdbc</span>:autoReconnect <span class="string">"true"</span>;</span><br><span class="line">	<span class="attribute">jdbc</span>:zeroDateTimeBehavior <span class="string">"convertToNull"</span>;</span><br><span class="line">	.</span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">Table</span> <span class="selector-tag">lemmas</span></span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:ClassMap</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:dataStorage <span class="attribute">map</span>:database;</span><br><span class="line">	<span class="attribute">d2rq</span>:uriPattern <span class="string">"lemmas/@@lemmas.title_id@@"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:class <span class="attribute">vocab</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:classDefinitionLabel <span class="string">"lemmas"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas__label</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">rdfs</span>:label;</span><br><span class="line">	<span class="attribute">d2rq</span>:pattern <span class="string">"lemmas #@@lemmas.title_id@@"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_title</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_title;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas title"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.title"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_title_id</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_title_id;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas title_id"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.title_id"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:datatype <span class="attribute">xsd</span>:integer;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_abstract</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_abstract;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas abstract"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.abstract"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_infobox</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_infobox;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas infobox"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.infobox"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_subject</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_subject;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas subject"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.subject"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_disambi</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_disambi;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas disambi"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.disambi"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_redirect</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_redirect;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas redirect"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.redirect"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_curLink</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_curLink;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas curLink"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.curLink"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_interPic</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_interPic;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas interPic"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.interPic"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_interLink</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_interLink;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas interLink"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.interLink"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_exterLink</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_exterLink;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas exterLink"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.exterLink"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_relateLemma</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_relateLemma;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas relateLemma"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.relateLemma"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_all_text</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">vocab</span>:lemmas_all_text;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas all_text"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.all_text"</span>;</span><br><span class="line">	.</span><br></pre></td></tr></table></figure>
<p>但是这个 mapping 文件我们还不能使用，需要做一些修改：</p>
<ul>
<li><p>vocab 这个我们不用，因此删除开头和正文中带有 vocab 的部分</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@prefix</span> <span class="attribute">vocab</span>: &lt;vocab/&gt; .</span><br><span class="line"><span class="attribute">d2rq</span>:class <span class="attribute">vocab</span>:lemmas;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>因为我们有互动和百度两个图谱，因此需要指定不同的前缀，对于互动百科</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@prefix :</span> &lt;<span class="attribute">http</span>:<span class="comment">//www.kghudong.com#&gt; .</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>因为是中文图谱，因此要指定文字编码：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">d2rq:</span><span class="keyword">jdbcDSN </span><span class="string">"jdbc:mysql:///hudong_fenlei?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false"</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>为了实现生成及修改全自自动，需编写dos下的bat实现，get_ttl.bat代码如下：<br><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off&amp;<span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> db=hudong_fenlei</span><br><span class="line"><span class="built_in">set</span> file=kg_demo_mapping_<span class="variable">%db%</span>.ttl</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> generate-mapping -u root -p root -o <span class="variable">%file%</span> jdbc:mysql:///<span class="variable">%db%</span>?useSSL=false</span><br><span class="line"></span><br><span class="line">:: <span class="keyword">call</span> <span class="built_in">findstr</span> /i /v /C:"@prefix vocab" "<span class="variable">%file%</span>"&gt;&gt;<span class="variable">%file%</span>.bk</span><br><span class="line">:: <span class="built_in">move</span> /y <span class="variable">%file%</span>.bk <span class="variable">%file%</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">1</span>,* delims=:" <span class="variable">%%b</span> <span class="keyword">in</span> ('<span class="built_in">findstr</span> /n ".*" "<span class="variable">%file%</span>"')<span class="keyword">do</span> (</span><br><span class="line">	<span class="built_in">set</span> "var=<span class="variable">%%c</span>"</span><br><span class="line">	<span class="keyword">if</span> "<span class="variable">!var!</span>" <span class="keyword">neq</span> "@prefix vocab: &lt;vocab/&gt; ." (</span><br><span class="line">		<span class="keyword">if</span> "<span class="variable">!var!</span>" <span class="keyword">equ</span> "" (</span><br><span class="line">			&gt;&gt;<span class="variable">%file%</span>.bk <span class="built_in">echo</span>,<span class="variable">!var!</span>) ^</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> "<span class="variable">!var!</span>" <span class="keyword">equ</span> "@prefix jdbc: &lt;http://d2rq.org/terms/jdbc/&gt; ." (</span><br><span class="line">		  &gt;&gt;<span class="variable">%file%</span>.bk <span class="built_in">echo</span>,<span class="variable">!var!</span></span><br><span class="line">			&gt;&gt;<span class="variable">%file%</span>.bk <span class="built_in">echo</span>,@prefix : ^&lt;http://www.kghudong.com#^&gt; .) ^</span><br><span class="line">		<span class="keyword">else</span> (</span><br><span class="line">			<span class="built_in">echo</span>;"<span class="variable">!var!</span>"|<span class="built_in">find</span> "jdbcDSN"&amp;&amp;(</span><br><span class="line">				&gt;&gt;<span class="variable">%file%</span>.bk <span class="built_in">echo</span>,  d2rq:jdbcDSN ^"jdbc:mysql:///<span class="variable">%db%</span>?useUnicode=true^&amp;characterEncoding=utf8^&amp;useSSL=false^";)||(</span><br><span class="line">				<span class="built_in">set</span> "var=!var:vocab= !"</span><br><span class="line">	    	&gt;&gt;<span class="variable">%file%</span>.bk <span class="built_in">echo</span>,<span class="variable">!var!</span>))</span><br><span class="line">	)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">move</span> /y <span class="variable">%file%</span>.bk <span class="variable">%file%</span></span><br></pre></td></tr></table></figure></p>
<p>运行get_ttl.bat是修改后的，得到如下 mapping 文件：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@prefix</span> <span class="attribute">map</span>: &lt;#&gt; .</span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">db</span>: &lt;&gt; .</span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">rdf</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">rdfs</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.w3.org/2000/01/rdf-schema#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">xsd</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.w3.org/2001/XMLSchema#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">d2rq</span>: &lt;<span class="attribute">http</span>:<span class="comment">//www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> <span class="attribute">jdbc</span>: &lt;<span class="attribute">http</span>:<span class="comment">//d2rq.org/terms/jdbc/&gt; .</span></span><br><span class="line"><span class="variable">@prefix</span> : &lt;<span class="attribute">http</span>:<span class="comment">//www.kghudong.com#&gt; .</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">map</span>:database a <span class="attribute">d2rq</span>:Database;</span><br><span class="line">	<span class="attribute">d2rq</span>:jdbcDriver <span class="string">"com.mysql.jdbc.Driver"</span>;</span><br><span class="line">  <span class="attribute">d2rq</span>:jdbcDSN <span class="string">"jdbc:mysql:///hudong_fenlei?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:username <span class="string">"root"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:password <span class="string">"root"</span>;</span><br><span class="line">	<span class="attribute">jdbc</span>:autoReconnect <span class="string">"true"</span>;</span><br><span class="line">	<span class="attribute">jdbc</span>:zeroDateTimeBehavior <span class="string">"convertToNull"</span>;</span><br><span class="line">	.</span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">Table</span> <span class="selector-tag">lemmas</span></span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:ClassMap</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:dataStorage <span class="attribute">map</span>:database;</span><br><span class="line">	<span class="attribute">d2rq</span>:uriPattern <span class="string">"lemmas/@@lemmas.title_id@@"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">class  </span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:classDefinitionLabel <span class="string">"lemmas"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas__label</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:property <span class="attribute">rdfs</span>:label;</span><br><span class="line">	<span class="attribute">d2rq</span>:pattern <span class="string">"lemmas #@@lemmas.title_id@@"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_title</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_title;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas title"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.title"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_title_id</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_title_id;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas title_id"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.title_id"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:datatype <span class="attribute">xsd</span>:integer;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_abstract</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_abstract;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas abstract"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.abstract"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_infobox</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_infobox;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas infobox"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.infobox"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_subject</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_subject;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas subject"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.subject"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_disambi</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_disambi;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas disambi"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.disambi"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_redirect</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_redirect;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas redirect"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.redirect"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_curLink</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_curLink;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas curLink"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.curLink"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_interPic</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_interPic;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas interPic"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.interPic"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_interLink</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_interLink;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas interLink"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.interLink"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_exterLink</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_exterLink;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas exterLink"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.exterLink"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_relateLemma</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_relateLemma;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas relateLemma"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.relateLemma"</span>;</span><br><span class="line">	.</span><br><span class="line"><span class="selector-tag">map</span><span class="selector-pseudo">:lemmas_all_text</span> <span class="selector-tag">a</span> <span class="selector-tag">d2rq</span><span class="selector-pseudo">:PropertyBridge</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:belongsToClassMap <span class="attribute">map</span>:lemmas;</span><br><span class="line">	<span class="attribute">d2rq</span>:<span class="attribute">property  </span>:lemmas_all_text;</span><br><span class="line">	<span class="attribute">d2rq</span>:propertyDefinitionLabel <span class="string">"lemmas all_text"</span>;</span><br><span class="line">	<span class="attribute">d2rq</span>:column <span class="string">"lemmas.all_text"</span>;</span><br><span class="line">	.</span><br></pre></td></tr></table></figure>
<h2 id="2-网页端访问"><a href="#2-网页端访问" class="headerlink" title="2. 网页端访问"></a>2. 网页端访问</h2><p>前面我们说 D2RQ提供虚拟的RDF访问么，现在我们来使用它。</p>
<p>首先进入到 d2rq文件夹内，运行</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS C:\my\d2rq&gt; ./d2r-server kg_demo_mapping_hudong_fenlei.ttl</span><br><span class="line"><span class="number">09</span>:<span class="number">49</span>:<span class="number">26</span> INFO  JettyLauncher        :: <span class="string">[[[ Server started at http://localhost:2020/ ]]</span>]</span><br></pre></td></tr></table></figure>
<p>命令开启服务器，然后通过网页端进行访问 <a href="http://localhost:2020/" target="_blank" rel="noopener">http://localhost:2020/</a> 。</p>
<p>点进 lemmas，随意打开一个，就可以看到该词条的信息。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">lemmas <span class="comment">#1</span></span><br><span class="line">Resource URI: http:<span class="regexp">//localhost</span>:<span class="number">2020</span>/resource/lemmas/<span class="number">1</span></span><br><span class="line">Home | All lemmas</span><br><span class="line">Property	Value</span><br><span class="line">rdfs:label	lemmas <span class="comment">#1</span></span><br><span class="line">:lemmas_abstract	博焱，<span class="number">1987</span>年<span class="number">8</span>月<span class="number">27</span>出生于台湾，中国台湾男演员，毕业于中国文化大学体育学系。<span class="number">2008</span>年，出演首部电视剧《篮球火》，从而正式进入演艺圈 。<span class="number">2009</span>年，主演台湾偶像剧《终极三国》，在剧中饰演张飞 。<span class="number">2010</span>年，所在组合“武虎将”获得第十四届全球华语榜中榜暨亚洲影响力大典最佳新晋组合。<span class="number">2011</span>年，出演台湾偶像剧《旋风管家》。<span class="number">2013</span>年，出演台湾偶像剧《女王的诞生》 。<span class="number">2014</span>年，出演清朝古装剧《龙飞凤舞》。编辑摘要</span><br><span class="line">:lemmas_all_text	演艺经历/博焱 编辑 博焱 <span class="number">2008</span>年，出演首部电视剧《篮球火》，在剧中饰演齐啸云，从而正式进入演艺圈   。<span class="number">2009</span>年，与胡宇威、陈德修、陈乃荣合作主演台湾偶像剧《终极三国》，在剧中饰演与关羽是出生入死的好朋友张飞   ；同年，与胡宇崴、班杰、邵翔、寺唯宏正组成“武虎将”，并推出《对手》、《朋友》两首单曲，收录于《强辩之〈终极三国〉三团鼎立SUPER大斗阵》合辑中   ；同年，武虎将推出首本写真集《我爱武虎将》   。<span class="number">2010</span>年，与蔡颐榛、李昂霖、蔡芷纭合作主演魔法偶像剧《萌学园之萌骑士传奇》，在剧中饰演中等部－见习魔法士烈焱坚尼   ；同年，出演魔法偶像剧《萌学园<span class="number">2</span>圣战再起》   ；<span class="number">3</span>月<span class="number">28</span>日，所在组合“武虎将”获得第十四届全球华语榜中榜暨亚洲影响力大典最佳新晋组合   。 博焱剧照 <span class="number">2011</span>年，出演改编自日本漫画家畑健二郎的漫画作品《旋风管家！》的台湾偶像剧《旋风管家》，在剧中饰演康太郎的管家袁也枫。<span class="number">2013</span>年，在台湾偶像剧《刺猬男孩》中饰演小蔡；同年，出演孙耀威、杨谨华、蔡淑臻主演的台湾偶像剧《女王的诞生》，在剧中饰演唐美宝的弟弟唐育成     。<span class="number">2014</span>年，出演王建复、余秉谚、傅子纯、柯叔元主演的清朝古装剧《龙飞凤舞》，在剧中饰演春禾五霸之一的江水清。 主要作品/博焱 编辑 参演电视剧 上映时间 剧名 扮演角色 导演 合作演员 <span class="number">2014</span> 龙飞凤舞 江水清 孙树培 王建复, 余秉谚 <span class="number">2013</span> 女王的诞生 唐育成 陈戎晖 孙耀威, 杨谨华 <span class="number">2013</span> 刺猬男孩 小蔡 王小棣 , 安哲毅 何以奇, 李佳颖 <span class="number">2011</span> 旋风管家 袁也枫 朴信惠, 彭若仪 <span class="number">2010</span> 爱似百汇 用餐的客人 辰亦儒 , 炎亚纶 <span class="number">2010</span> 萌学园<span class="number">2</span>圣战再起 烈焱坚尼 叶中强 李昂霖, 林奕勋, 阿本, 蔡芷纭, 蔡颐榛 <span class="number">2010</span> 萌学园之萌骑士传奇 烈焱坚尼 叶中强 李昂霖, 林奕勋, 曾子余, 蔡芷纭, 蔡颐榛 <span class="number">2009</span> 真情伴星月 利比亚留学生 黄克义 仇政, 贾孝国 <span class="number">2009</span> 终极三国 张飞 潘静如, 黄家新, 冯家瑞 胡宇崴, 陈德修 <span class="number">2008</span> 篮球火 齐啸云 林合隆, 杨利 吴尊, 言承旭, 罗志祥 音乐作品 专辑 专辑名称 发行时间 强辩之终极三国三国鼎立SUPER大斗阵 <span class="number">2009</span>-<span class="number">03</span>-<span class="number">04</span> 国语 参演MV 年份 专辑名称 曲目 <span class="number">2009</span>年　　 强辩之终极三国三国鼎立SUPER大斗阵 对手 - 武虎将、东城卫、强辩 <span class="number">2009</span>年　　 Paradise <span class="number">24</span>小时疯狂 - 陈乃荣(武虎将客串) 出版书籍 年份 书名 出版社 <span class="number">2009</span>-09-<span class="number">11</span>　　 我爱武虎将 台湾角川 获奖记录/博焱 编辑 全球华语榜中榜 ▪ <span class="number">2010</span>-<span class="number">03</span>-<span class="number">28</span>    第十四届    全球华语榜中榜暨亚洲影响力大典最佳新晋组合    （获奖）     人物评价/博焱 编辑 博焱是一个NG大王，他在拍《终极三国》时NG掉好几饼带子，作为新人拍戏经验不是很足，进入状态很慢 （网易评）   。博焱主演的魔法偶像剧《萌学园》深受大小朋友的喜爱 （ETtoday评）   。博焱是一位体型精力都一级棒的帅哥，他不仅身材完美，武艺也很高超 （腾讯评）   。</span><br><span class="line">:lemmas_curLink	http:<span class="regexp">//www</span>.baike.com/wiki/%E6%9E%97%E4%BC%AF%E5%BD%A6</span><br><span class="line">:lemmas_disambi	博焱</span><br><span class="line">:lemmas_exterLink	&#123;&#125;</span><br><span class="line">:lemmas_infobox	&#123;&#125;</span><br><span class="line">:lemmas_interLink	&#123;&#125;</span><br><span class="line">:lemmas_interPic	http:<span class="regexp">//a</span>3.att.hudong.com/<span class="number">57</span>/<span class="number">28</span>/<span class="number">50200009239445155794289843634_</span>s.jpg,http:<span class="regexp">//www</span>.huimg.cn/public/images/a-baikelogo2.gif,http:<span class="regexp">//www</span>.huimg.cn/lib/<span class="number">0</span>.gif,http:<span class="regexp">//www</span>.huimg.cn/lib/<span class="number">0</span>.gif,http:<span class="regexp">//a</span>3.att.hudong.com/<span class="number">57</span>/<span class="number">28</span>/<span class="number">50200009239445155794289843634_</span>s.jpg,<span class="regexp">//www</span>.huimg.cn/public/images/a-baikelogo2.gif,<span class="regexp">//a</span>7.baike.com/<span class="number">46</span>/<span class="number">56</span>/<span class="number">4656</span>D0B2C95947F0E226C489FE26466F_9<span class="number">0</span>.png?title=%E5%8D%9A%E7%84%B1</span><br><span class="line">:lemmas_redirect	林伯彦</span><br><span class="line">:lemmas_relateLemma	&#123;<span class="string">"\u6797\u4f2f\u5f66"</span>: <span class="string">"http://www.baike.com/wiki/%E6%9E%97%E4%BC%AF%E5%BD%A6?prd=zhengwenye_left_tongyici"</span>&#125;</span><br><span class="line">:lemmas_subject	人物,名人,明星,歌手,演员,综艺</span><br><span class="line">:lemmas_title	博焱</span><br><span class="line">:lemmas_title_id	<span class="number">1</span> (xsd:integer)</span><br><span class="line">rdf:type	:lemmas</span><br><span class="line">The server is configured to display only a limited number of <span class="keyword">values</span> (limit per property bridge: <span class="number">50</span>).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Metadata</span><br><span class="line">&lt;http:<span class="regexp">//localhost</span>:<span class="number">2020</span>/data/lemmas/<span class="number">1</span>&gt;  </span><br><span class="line">dc:date	<span class="number">2019</span>-<span class="number">11</span>-<span class="number">05</span>T01:<span class="number">50</span>:<span class="number">19.403</span>Z</span><br><span class="line">prv:containedBy	&lt;http:<span class="regexp">//localhost</span>:<span class="number">2020</span>/dataset&gt;</span><br><span class="line">void:inDataset	&lt;http:<span class="regexp">//localhost</span>:<span class="number">2020</span>/dataset&gt;</span><br><span class="line">rdf:type	prv:DataItem</span><br><span class="line">rdf:type	foaf:Document</span><br></pre></td></tr></table></figure>
<h2 id="3-三元组的生成"><a href="#3-三元组的生成" class="headerlink" title="3. 三元组的生成"></a>3. 三元组的生成</h2><p>在生成 mapping 文件后，通过</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\<span class="keyword">my</span>\d2rq&gt; ./<span class="keyword">dump</span>-rdf -o hudong_fenlei.nt kg_demo_mapping_hudong_fenlei.ttl</span><br></pre></td></tr></table></figure>
<p>命令将数据转换为Ntriples。这一步比较慢，生成的文件也比较大，像互动百科有 430W 词条，得到的nt文件大概59个G，因此要做好预留空间。</p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="/" target="_blank">Ljjyy.com</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/archives/2019/10/100601.html" class="pre-post btn btn-default" title='从零开始学习知识图谱 之 十一.百科知识图谱构建 5.Jena使用及SPARQL查询'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">从零开始学习知识图谱 之 十一.百科知识图谱构建 5.Jena使用及SPARQL查询</span>
        </a>
    
    
        <a href="/archives/2019/10/100599.html" class="next-post btn btn-default" title='从零开始学习知识图谱 之 九.百科知识图谱构建 3.基于TensorFlow神经网络关系抽取的数据集构建(使用OpenNRE)'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">从零开始学习知识图谱 之 九.百科知识图谱构建 3.基于TensorFlow神经网络关系抽取的数据集构建(使用OpenNRE)</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '5MzTXYXkt03k101j0PmSDN34-gzGzoHsz',
            appKey: 'iwjYgwno6qj3wtDVVSbe8nYQ',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一-简介"><span class="toc-text">一. 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二-环境准备"><span class="toc-text">二. 环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-操作系统"><span class="toc-text">1. 操作系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-jdk"><span class="toc-text">2. jdk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-D2RQ"><span class="toc-text">3. D2RQ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三-D2RQ-的使用"><span class="toc-text">三. D2RQ 的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-生成-mapping-文件"><span class="toc-text">1. 生成 mapping 文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-网页端访问"><span class="toc-text">2. 网页端访问</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-三元组的生成"><span class="toc-text">3. 三元组的生成</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019-2024&emsp;<a href="/" class="copyright-links" target="_blank" rel="nofollow">Ljjyy.com</a>
                </span> |
                <span>
                    <a href="/about/" class="copyright-links" target="_blank" rel="nofollow">关于我们</a>
                </span> |                
                <span>
                    <a href="/sitemap.xml" class="copyright-links" target="_blank" rel="nofollow">网站地图</a>
                </span> |
                <span>
                    <a href="/archives/" class="copyright-links" target="_blank" rel="nofollow">时间轴</a>
                </span>              
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>