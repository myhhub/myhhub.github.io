<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://www.ljjyy.com">
    <!--SEO-->

    <meta name="keywords" content="qt">


    <meta name="description" content="使用Qt库开发的应用程序，一般有两种发布方式：（1）静态编译发布。这种方式使得程序在编译的时候会将Qt核心库全部编译到一个可执行文件中。其优势是简单单一，所有的依赖库都集中在一起，其缺点也很明显...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>Qt Installer Framework 使用手册 | 来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</title>


    <link rel="alternate" href="/atom.xml" title="来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
        <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
        <script>LA.init({id: "JgbNOaw1xxsmUUsQ",ck: "JgbNOaw1xxsmUUsQ"})</script>
	</div>






    
    <meta name="baidu-site-verification" content="dTHILoORpx">


    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  >
    <div class="main-header-box">
        <!--a class="header-avatar" href="/" title='Ljjyy.com'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a-->
        <div class="branding">
            
                <h2> 多读书多实践，勤思考善领悟 </h2>
            
    	  </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">

        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="web-logo"  href="/" title='Ljjyy.com'></a>
                    <!--a class="navbar-brand" href="https://www.ljjyy.com">来唧唧歪歪(Ljjyy.com) - 多读书多实践，勤思考善领悟</a-->
                </div>
                <div class="collapse navbar-collapse" id="main-menu" style="">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/cloud/"><i class="fa "></i>云计算</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/front/"><i class="fa "></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/back/"><i class="fa "></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/devops/"><i class="fa "></i>运维</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/crack/"><i class="fa "></i>破解</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/penetration/"><i class="fa "></i>渗透</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/tool/"><i class="fa "></i>工具</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/other/"><i class="fa "></i>其他</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Qt Installer Framework 使用手册">
            
	            Qt Installer Framework 使用手册
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/back/">后端</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/qt/">qt</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2021/08/19</span>
        </span>
        
    
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>609</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <p>使用Qt库开发的应用程序，一般有两种发布方式：（1）静态编译发布。这种方式使得程序在编译的时候会将Qt核心库全部编译到一个可执行文件中。其优势是简单单一，所有的依赖库都集中在一起，其缺点也很明显，可执行程序体量较大，光Qt核心库加起来就得十多兆。（2）制作安装包发布。这种方式的原理也简单，就是将可执行程序和其依赖的库文件一起打包压缩，制作成安装包发布。</p>
<p>制作安装包的工具挺多，一般使用最多的是Qt官方的安装包制作框架 Qt installer framework  (QtIFW) ，广泛应用于 Qt SDK, Qt Creator 等安装包产品。第三方的如 MSYS2 也是使用的 QTIF。</p>
<p>制作安装包只需要简单的配置就可以生成安装文件，同时可以通过javascript脚本来定制安装过程。配置文件为config.xml。</p>
<h1 id="一-概述"><a href="#一-概述" class="headerlink" title="一. 概述"></a>一. 概述</h1><p>Qt Installer Framework (QtIFW) 是 Qt 官方提供的安装包制作框架。提供了一组工具和实用程序，用于一次性创建安装程序，并在所有支持的桌面 Qt 平台上部署它们，而无需重写源代码。安装程序将在运行它们的平台上具有本机外观：Linux、Microsoft Windows 和macOS。QT的Qt Creator和Qt Installer Framework (QtIFW) 自身的安装包都是由这个工具制作的，详细说明请访问 <a href="http://doc.qt.io/qtinstallerframework/index.html" target="_blank" rel="noopener">QtIFW的官方文档</a> 。</p>
<p>Qt Installer Framework  (QtIFW) 工具生成带有一组页面的安装程序，这些页面在安装、更新或卸载过程中指导用户。您提供可安装的内容并指定有关它的信息，例如产品和安装程序的名称以及许可协议的文本。</p>
<p>您可以通过向预定义页面添加小部件或通过添加整个页面为用户提供其他选项来自定义安装程序。您可以创建脚本以向安装程序添加操作。</p>
<h2 id="选择安装程序类型"><a href="#选择安装程序类型" class="headerlink" title="选择安装程序类型"></a>选择安装程序类型</h2><p>您可以根据您的用例为最终用户提供<em>离线</em>或<em>在线</em>安装程序，或两者兼而有之。</p>
<p>两个安装程序都安装了一个<em>维护工具</em>，以后可用于添加、更新和删除组件。脱机安装程序包含所有可安装组件，并且在安装过程中不需要网络连接。在线安装程序只安装维护工具，然后从 Web 服务器上的在线存储库下载和安装组件。因此，与离线安装程序二进制文件相比，在线安装程序二进制文件的大小更小，下载时间也更短。如果最终用户没有安装所有可用的组件，下载和运行在线安装程序的总时间也可能比下载和运行离线安装程序的时间短。</p>
<p>最终用户可以使用维护工具在初始安装后从服务器安装其他组件，以及在服务器上发布更新后立即接收内容的自动更新。但是，仅当您在离线安装程序配置中指定存储库地址或最终用户在维护工具设置中自己指定存储库地址时，这才适用于离线安装。</p>
<p>创建离线安装程序，使用户可以直接将安装包下载到介质上，以便稍后安装到计算机上。例如，您还可以在 CD-ROM 或 U 盘上分发安装包。</p>
<p>创建在线安装程序，使用户能够始终安装最新版本的内容二进制文件。</p>
<h2 id="促进更新"><a href="#促进更新" class="headerlink" title="促进更新"></a>促进更新</h2><p>提供在线存储库以向安装您的产品的最终用户推广更新。提供更新的最简单方法是重新创建存储库并将其上传到 Web 服务器。对于大型存储库，您只能更新更改的组件。</p>
<h2 id="为安装人员提供内容"><a href="#为安装人员提供内容" class="headerlink" title="为安装人员提供内容"></a>为安装人员提供内容</h2><p>您可以让其他内容提供商将组件作为附加组件添加到安装程序。组件提供者必须设置包含可安装组件的存储库，并将指向存储库的 URL 传递给最终用户。然后，最终用户必须在安装程序中配置 URL。附加组件在包管理器中可见。</p>
<h1 id="二-安装-QtIFW"><a href="#二-安装-QtIFW" class="headerlink" title="二. 安装 QtIFW"></a>二. 安装 QtIFW</h1><p>可以通过源代码编译或安装包安装Qt Installer Framework (QtIFW) 。为了简单起见，尽可能下载安装包去安装。</p>
<h2 id="方式一-通过源代码编译"><a href="#方式一-通过源代码编译" class="headerlink" title="方式一: 通过源代码编译"></a>方式一: 通过源代码编译</h2><p>以下步骤描述了如何自己构建 Qt 安装程序框架。如果您下载了框架的预构建版本，则可以跳过此步骤。</p>
<h3 id="支持的编译器"><a href="#支持的编译器" class="headerlink" title="支持的编译器"></a>支持的编译器</h3><p>Qt 安装程序框架可以使用 Microsoft Visual Studio 2013 和更新版本、GCC 4.7 和更新版本以及 Clang 3.1 和更新版本进行编译。目前，经过测试的 Windows 组合是 Qt 5.12.4 和 MSVC 2015。</p>
<h3 id="配置-Qt"><a href="#配置-Qt" class="headerlink" title="配置 Qt"></a>配置 Qt</h3><p>如果您使用<strong>静态构建的 Qt</strong> 来构建 Qt 安装程序框架，则不必提供 Qt 库，这使您能够将安装程序作为一个文件分发。如果您静态链接 OpenSSL 库，请阅读 <a href="http://doc.qt.io/qt-5/ssl.html" target="_blank" rel="noopener">http://doc.qt.io/qt-5/ssl.html</a> 中的 SSL 导入和导出限制。</p>
<p>支持的 Qt 版本是 5.12.7。</p>
<h4 id="为-Windows-配置-Qt"><a href="#为-Windows-配置-Qt" class="headerlink" title="为 Windows 配置 Qt"></a>为 Windows 配置 Qt</h4><p>我们建议您在为 Windows 配置 Qt 时使用以下选项：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configure -prefix %CD%\qtbase -<span class="keyword">release</span> -<span class="keyword">static</span> -<span class="keyword">static</span>-runtime -accessibility -<span class="keyword">no</span>-icu -<span class="keyword">no</span>-<span class="keyword">sql</span>-sqlite -<span class="keyword">no</span>-qml-debug -nomake examples -nomake tests</span><br></pre></td></tr></table></figure>
<p>Build Qt:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmake (<span class="keyword">or</span> <span class="string">'mingw32-make'</span>) <span class="keyword">module</span>-qtbase <span class="keyword">module</span>-qtdeclarative <span class="keyword">module</span>-qttools <span class="keyword">module</span>-qttranslations <span class="keyword">module</span>-qtwinextras</span><br></pre></td></tr></table></figure>
<h4 id="为-Linux-配置-Qt"><a href="#为-Linux-配置-Qt" class="headerlink" title="为 Linux 配置 Qt"></a>为 Linux 配置 Qt</h4><p>我们建议您对 Linux 使用以下配置选项：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">configure</span> -prefix <span class="variable">$PWD</span>/qtbase -release -static -accessibility -qt-zlib -qt-libpng -qt-libjpeg -qt-xcb -qt-pcre -<span class="literal">no</span>-glib -<span class="literal">no</span>-cups -<span class="literal">no</span>-sql-sqlite -<span class="literal">no</span>-qml-<span class="literal">debug</span> -<span class="literal">no</span>-opengl -<span class="literal">no</span>-egl -<span class="literal">no</span>-xinput2 -<span class="literal">no</span>-sm -<span class="literal">no</span>-icu -nomake examples -nomake tests -<span class="literal">no</span>-libudev</span><br></pre></td></tr></table></figure>
<p>构建 Qt：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make <span class="keyword">module</span>-qtbase <span class="keyword">module</span>-qtdeclarative <span class="keyword">module</span>-qttools <span class="keyword">module</span>-qttranslations</span><br></pre></td></tr></table></figure>
<h4 id="为-macOS-配置-Qt"><a href="#为-macOS-配置-Qt" class="headerlink" title="为 macOS 配置 Qt"></a>为 macOS 配置 Qt</h4><p>我们建议您为macOS使用以下配置选项：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">configure</span> -prefix <span class="variable">$PWD</span>/qtbase -release -static -<span class="literal">no</span>-securetransport -accessibility -qt-zlib -qt-libpng -qt-libjpeg -<span class="literal">no</span>-cups -<span class="literal">no</span>-sql-sqlite -<span class="literal">no</span>-qml-<span class="literal">debug</span> -nomake examples -nomake tests -<span class="literal">no</span>-freetype</span><br></pre></td></tr></table></figure>
<p>构建 Qt：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make <span class="keyword">module</span>-qtbase <span class="keyword">module</span>-qtdeclarative <span class="keyword">module</span>-qttools <span class="keyword">module</span>-qttranslations</span><br></pre></td></tr></table></figure>
<h3 id="编译QtIFW"><a href="#编译QtIFW" class="headerlink" title="编译QtIFW"></a>编译QtIFW</h3><ol>
<li>从<a href="http://code.qt.io/cgit/installer-framework/installer-framework.git/克隆" target="_blank" rel="noopener">http://code.qt.io/cgit/installer-framework/installer-framework.git/克隆</a> Qt 安装程序框架源代码以获取工具的源代码。</li>
<li>通过从<strong>静态 Qt</strong> 运行“qmake”，然后是“make”或“nmake”来构建工具。</li>
</ol>
<h2 id="方式二-通过安装包安装"><a href="#方式二-通过安装包安装" class="headerlink" title="方式二: 通过安装包安装"></a>方式二: 通过安装包安装</h2><p>首先根据自己的平台（Linux或Windows等）去Qt官网下载Qt Installer Framework (QtIFW) 的安装包或者源码。官方下载：<a href="http://download.qt.io/official_releases/qt-installer-framework/" target="_blank" rel="noopener">http://download.qt.io/official_releases/qt-installer-framework/</a> 。</p>
<h2 id="QtIFW目录结构"><a href="#QtIFW目录结构" class="headerlink" title="QtIFW目录结构"></a>QtIFW目录结构</h2><p>安装好后，并不是一个直接可用的图形界面软件。而是提供了一些可执行的工具程序（Windows下是exe文件），然后根据规则，利用这些工具生成安装包。<br>假设安装在C:\Qt，则生成目录QtIFW-4.1.1，其中4.1.1是版本号。目录结构如下所示。</p>
<h3 id="1、bin"><a href="#1、bin" class="headerlink" title="1、bin"></a>1、bin</h3><p>bin中包含的就是我们需要用到的工具。最简单地，我们只用其中一个，叫binarycreator.exe</p>
<h3 id="2、doc"><a href="#2、doc" class="headerlink" title="2、doc"></a>2、doc</h3><p>doc中包含帮助文档。文档的格式是网页（html）。也可以去官方网站上查看文档。文档是英文。不过很详细。</p>
<h3 id="3、examples"><a href="#3、examples" class="headerlink" title="3、examples"></a>3、examples</h3><p>examples中包含了很多Qt Installer Framework (QtIFW) 的例子，这些示例说明了如何使用组件脚本来自定义安装程序。初学者只需要将例子作为模板，按照自己的情况修改即可。</p>
<p><strong>自带 Qt Installer Framework (QtIFW) 示例</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>简介</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-changeuserinterface-example.html" target="_blank" rel="noopener">Change Installer UI Example</a></td>
<td>使用组件脚本修改安装程序 UI。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-componenterror-example.html" target="_blank" rel="noopener">Component Error Example</a></td>
<td>如果无法安装组件，则使用组件脚本停止安装。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-dependencies-example.html" target="_blank" rel="noopener">Dependency Solving Example</a></td>
<td>使用组件的 package.xml 文件来定义组件之间的依赖关系和自动依赖关系。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-dynamicpage-example.html" target="_blank" rel="noopener">Dynamic Page Installer Example</a></td>
<td>使用组件脚本和动态页面来构建安装程序。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-hidecheckbox-example.html" target="_blank" rel="noopener">Hide Checkbox Example</a></td>
<td>使用组件的 package.xml 文件隐藏项目的复选框。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-modifyextract-example.html" target="_blank" rel="noopener">Modify Extract Installer Example</a></td>
<td>在组件脚本中使用提取归档挂钩来修改目标路径。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-online-example.html" target="_blank" rel="noopener">Online Installer Example</a></td>
<td>使用repogen 工具和配置文件设置在线安装程序。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-openreadme-example.html" target="_blank" rel="noopener">Open ReadMe Example</a></td>
<td>使用组件脚本添加一个复选框，用于在最终安装程序页面中打开自述文件。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-quitinstaller-example.html" target="_blank" rel="noopener">Quit Installer Example</a></td>
<td>使用组件脚本退出安装程序。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-registerfileextension-example.html" target="_blank" rel="noopener">Register File Extension Example</a></td>
<td>使用组件脚本在 Windows 上注册文件扩展名。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-repositorycategories-example.html" target="_blank" rel="noopener">Repository Categories Example</a></td>
<td>使用 RepositoryCategories 元素设置一个在线安装程序，其中存储库被分组。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-startmenu-example.html" target="_blank" rel="noopener">Start Menu Shortcut Example</a></td>
<td>使用组件脚本向 Windows 开始菜单添加条目。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-stylesheet-example.html" target="_blank" rel="noopener">Stylesheet Example</a></td>
<td>使用样式表自定义 UI。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-systeminfo-example.html" target="_blank" rel="noopener">System Information Example</a></td>
<td>在组件脚本中使用 systemInfo API 检查操作系统版本和位数。</td>
</tr>
<tr>
<td><a href="https://doc.qt.io/qtinstallerframework/qtinstallerframework-translations-example.html" target="_blank" rel="noopener">Translation Example</a></td>
<td>使用翻译来本地化安装程序页面和许可证。</td>
</tr>
</tbody>
</table>
<h3 id="4、Licenses"><a href="#4、Licenses" class="headerlink" title="4、Licenses"></a>4、Licenses</h3><p>Licenses中包含了Qt Installer Framework (QtIFW) 的Licenses，例如LGPL等。</p>
<h1 id="三-QtIFW制作安装包"><a href="#三-QtIFW制作安装包" class="headerlink" title="三. QtIFW制作安装包"></a>三. QtIFW制作安装包</h1><h2 id="安装程序工作流程"><a href="#安装程序工作流程" class="headerlink" title="安装程序工作流程"></a>安装程序工作流程</h2><p>离线和在线安装程序的最终用户体验是相似的。与您的应用程序一起，安装程序会安装一个维护工具，其中包含一个包管理器、一个更新程序和一个卸载程序。最终用户可以使用维护工具添加、更新和删除组件。维护工具连接到外部存储库以获取要添加或更新的组件。您可以在配置文件中指定存储库，或者最终用户可以在维护工具设置中指定它。</p>
<p>您可以支持以下最终用户工作流程：</p>
<ul>
<li>初始安装</li>
<li>添加组件</li>
<li>移除组件</li>
<li>更新组件</li>
<li>指定设置</li>
<li>从命令行使用</li>
</ul>
<h2 id="创建安装程序"><a href="#创建安装程序" class="headerlink" title="创建安装程序"></a>创建安装程序</h2><p>创建离线和在线安装程序需要执行以下步骤：</p>
<ol>
<li>为可安装组件创建一个<em>包目录</em>。有关更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/ifw-component-description.html" target="_blank" rel="noopener">包目录</a>。</li>
<li>创建一个<code>config.xml</code>在<code>config</code>目录中调用的配置文件。它包含有关如何构建安装程序二进制文件和在线存储库的信息。有关文件格式和可用设置的更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/ifw-globalconfig.html" target="_blank" rel="noopener">配置文件</a>。</li>
<li>创建一个<code>package.xml</code>在<code>packages\{component}\meta</code>目录中调用的包信息文件。它包含部署和安装过程的设置。有关更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/ifw-component-description.html#meta-directory" target="_blank" rel="noopener">元目录</a>。</li>
<li>创建安装程序内容并将其复制到包目录。有关更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/ifw-component-description.html#data-directory" target="_blank" rel="noopener">数据目录</a>。</li>
<li>对于在线安装程序，使用该<code>repogen</code>工具创建包含可安装内容的存储库并将存储库上传到 Web 服务器。</li>
<li>使用该<code>binarycreator</code>工具创建安装程序。有关更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/ifw-tools.html" target="_blank" rel="noopener">工具</a>。</li>
</ol>
<h3 id="制作准备"><a href="#制作准备" class="headerlink" title="制作准备"></a>制作准备</h3><h4 id="1、目录结构"><a href="#1、目录结构" class="headerlink" title="1、目录结构"></a>1、目录结构</h4><p>用 Qt Installer Framework (QtIFW) 生成安装包时，必须先按照规范建立目录结构。<br>参考examples中的目录结构，例如examples/tutorial目录中的结构如下：</p>
<p>规范的目录结构中，包含一个config文件夹和一个packages文件夹。其中config文件夹中只包含一个config.xml文件，用于描述软件以及安装包的一些信息。packages文件夹包含了安装包的信息描述、行为描述以及数据。其中，packages中的每一个子文件夹都表示不同的软件，或者软件的一个模块或者部件，例如com.vendor.product1、com.vendor.product2等等。<br>其结构可能如下</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-packages</span><br><span class="line">    - com<span class="selector-class">.vendor</span><span class="selector-class">.root</span></span><br><span class="line">        - data</span><br><span class="line">        - meta</span><br><span class="line">    - com<span class="selector-class">.vendor</span><span class="selector-class">.root</span><span class="selector-class">.component1</span></span><br><span class="line">        - data</span><br><span class="line">        - meta</span><br><span class="line">    - com<span class="selector-class">.vendor</span><span class="selector-class">.root</span><span class="selector-class">.component1</span><span class="selector-class">.subcomponent1</span></span><br><span class="line">        - data</span><br><span class="line">        - meta</span><br><span class="line">    - com<span class="selector-class">.vendor</span><span class="selector-class">.root</span><span class="selector-class">.component2</span></span><br><span class="line">        - data</span><br><span class="line">        - meta</span><br></pre></td></tr></table></figure>
<p>对于简单的软件，可能只有一个模块，对应一个文件夹。<br>每个子文件夹下都有两个文件夹data和meta，前者包含了所有软件的数据，包括可执行文件、链接库文件、配置文件等等，将所有这些文件压缩成.7z压缩包后，放入此文件夹；后者包含了至少3个文件，installscript.qs、license.txt、package.xml，分别用于描述安装行为、许可信息、模块或软件的描述（用于选择模块的页面上），其中license.txt文件名可变，只需要在脚本中做相应修改即可。</p>
<h4 id="2、config-xml"><a href="#2、config-xml" class="headerlink" title="2、config.xml"></a>2、config.xml</h4><p>config/config.xml定义了安装程序的行为。</p>
<p>例子如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Installer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Name</span>&gt;</span>Your App<span class="tag">&lt;/<span class="name">Name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">Version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Title</span>&gt;</span>Your App Installer<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Publisher</span>&gt;</span>You<span class="tag">&lt;/<span class="name">Publisher</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StartMenuDir</span>&gt;</span>Your App<span class="tag">&lt;/<span class="name">StartMenuDir</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TargetDir</span>&gt;</span>@HomeDir@/Your App<span class="tag">&lt;/<span class="name">TargetDir</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ControlScript</span>&gt;</span>controller.qs<span class="tag">&lt;/<span class="name">ControlScript</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Installer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中各个标签的含义如下：</p>
<ul>
<li>&lt; Name&gt; 软件名称</li>
<li>&lt; Version&gt; 版本号</li>
<li>&lt; Title&gt; 安装程序窗口标题</li>
<li>&lt; Publisher&gt; 发布者名称</li>
<li>&lt; StartMenuDir&gt; 要生成的windows开始菜单目录</li>
<li>&lt; TargetDir&gt; 默认安装路径，您可以使用预定义的变量（嵌入在<a href="http://doc.qt.io/qt-5/qromancalendar.html" target="_blank" rel="noopener">@</a>字符中）作为元素的值，有关更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/scripting.html#predefined-variables" target="_blank" rel="noopener">预定义变量</a> 。</li>
<li>&lt; ControlScript&gt; 自定义安装程序控制脚本的文件名。请参阅<a href="https://doc.qt.io/qtinstallerframework/noninteractive.html" target="_blank" rel="noopener">控制器脚本</a> 。</li>
</ul>
<p>config.xml支持的标签很多，不过多数都是可选的，只有上述这些是必须的。请参考官方文档 <a href="https://doc.qt.io/qtinstallerframework/ifw-globalconfig.html" target="_blank" rel="noopener">https://doc.qt.io/qtinstallerframework/ifw-globalconfig.html</a> ，根据需要添加标签。</p>
<h4 id="3、data"><a href="#3、data" class="headerlink" title="3、data"></a>3、data</h4><p>data文件夹下包含了你要发布的软件的全部数据文件，包括可执行文件、链接库文件、数据库、配置文件等等。将所有文件用.7z格式打包后，放在data文件夹下即可。</p>
<h4 id="4、meta-installscript-qs"><a href="#4、meta-installscript-qs" class="headerlink" title="4、meta/installscript.qs"></a>4、meta/installscript.qs</h4><p>installscript.qs的语言类似于javascript，用于定义安装软件包的行为（如果软件有多个组件，每个分别配置），例如是否默认选中、是否生成开始菜单快捷方式、是否生成桌面快捷方式、是否有额外的安装步骤需要添加到常规步骤中。具体说明请参考examples中的例子以及官方文档。installscript.qs官方文档链接：<a href="http://doc.qt.io/qtinstallerframework/scripting.html" target="_blank" rel="noopener">http://doc.qt.io/qtinstallerframework/scripting.html</a> 。</p>
<h4 id="5、meta-license-txt"><a href="#5、meta-license-txt" class="headerlink" title="5、meta/license.txt"></a>5、meta/license.txt</h4><p>将软件有关的许可信息，写在此文件中，会在安装过程中显示并要求用户同意。<br>文件名称可以修改，不过修改过后要修改package.xml中对应的脚本。</p>
<h4 id="6、meta-package-xml"><a href="#6、meta-package-xml" class="headerlink" title="6、meta/package.xml"></a>6、meta/package.xml</h4><p>meta/package.xml定义了安装包在处理此部件时要显示的信息。<br>例子如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DisplayName</span>&gt;</span>The main component<span class="tag">&lt;/<span class="name">DisplayName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Description</span>&gt;</span>the main component of your app<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Version</span>&gt;</span>1.0.0-1<span class="tag">&lt;/<span class="name">Version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ReleaseDate</span>&gt;</span>2016-06-01<span class="tag">&lt;/<span class="name">ReleaseDate</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Name</span>&gt;</span>com.vendor.product<span class="tag">&lt;/<span class="name">Name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">License</span> <span class="attr">name</span>=<span class="string">"Your App Agreement"</span> <span class="attr">file</span>=<span class="string">"license.txt"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Default</span>&gt;</span>script<span class="tag">&lt;/<span class="name">Default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Script</span>&gt;</span><span class="undefined">installscript.qs</span><span class="tag">&lt;/<span class="name">Script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">UserInterfaces</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">UserInterface</span>&gt;</span>page.ui<span class="tag">&lt;/<span class="name">UserInterface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">UserInterfaces</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Package</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中各个标签的含义如下：</p>
<ul>
<li>&lt; DisplayName&gt; 显示的名称</li>
<li>&lt; Description&gt; 描述</li>
<li>&lt; Version&gt; 部件的版本号</li>
<li>&lt; ReleaseDate&gt; 发行日期</li>
<li>&lt; Name&gt; 部件名称（与文件夹名一致）</li>
<li>&lt; Licenses&gt; 许可信息名称以及许可文件名</li>
<li>&lt; Script&gt; 脚本文件，可选的。有关更多信息，请参阅<a href="https://doc.qt.io/qtinstallerframework/ifw-customizing-installers.html#adding-operations" target="_blank" rel="noopener">添加操作</a>。</li>
<li>&lt; UserInterfaces&gt; 额外的界面（如果需要的话，而且需要去installscript.qs中配置）</li>
</ul>
<p>同样地，支持的标签很多，不过多数都是可选的，上述这些也不一定是必须的。请参考官方文档 <a href="https://doc.qt.io/qtinstallerframework/ifw-component-description.html" target="_blank" rel="noopener">https://doc.qt.io/qtinstallerframework/ifw-component-description.html</a> ，根据需要添加标签。</p>
<h3 id="制作安装包"><a href="#制作安装包" class="headerlink" title="制作安装包"></a>制作安装包</h3><p>完成上述准备工作后，使用binarycreator.exe工具生成安装包。<br>需要在命令行中操作。在开始菜单中搜索cmd，或按下win+r输入cmd回车，打开命令行。转到刚才准备好的目录中。<br>例如：</p>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="symbol">\&gt;</span> cd Qt<span class="symbol">\Q</span>tIFW-4.1.1<span class="symbol">\e</span>xamples<span class="symbol">\y</span>ourapp </span><br><span class="line">C:<span class="symbol">\Q</span>t<span class="symbol">\Q</span>tIFW-4.1.1<span class="symbol">\e</span>xamples<span class="symbol">\y</span>ourapp&gt;..<span class="symbol">\.</span>.<span class="symbol">\b</span>in<span class="symbol">\b</span>inarycreator.exe -c config<span class="symbol">\c</span>onfig.xml -p packages YourInstaller.exe</span><br></pre></td></tr></table></figure>
<p>其中，路径一定要对，YourInstaller.exe是安装包文件名，换成你想要的名称即可</p>
<h1 id="四-参考"><a href="#四-参考" class="headerlink" title="四. 参考"></a>四. 参考</h1><p><a href="https://doc.qt.io/qtinstallerframework/ifw-reference.html" target="_blank" rel="noopener">https://doc.qt.io/qtinstallerframework/ifw-reference.html</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="/" target="_blank">Ljjyy.com</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/archives/2021/08/100678.html" class="pre-post btn btn-default" title='FLEXLM ECC 椭圆曲线加密分析'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">FLEXLM ECC 椭圆曲线加密分析</span>
        </a>
    
    
        <a href="/archives/2021/07/100673.html" class="next-post btn btn-default" title='龙芯硬件平台使用源码安装mysql8.0'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">龙芯硬件平台使用源码安装mysql8.0</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: '5MzTXYXkt03k101j0PmSDN34-gzGzoHsz',
            appKey: 'iwjYgwno6qj3wtDVVSbe8nYQ',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一-概述"><span class="toc-text">一. 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#选择安装程序类型"><span class="toc-text">选择安装程序类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#促进更新"><span class="toc-text">促进更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为安装人员提供内容"><span class="toc-text">为安装人员提供内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二-安装-QtIFW"><span class="toc-text">二. 安装 QtIFW</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#方式一-通过源代码编译"><span class="toc-text">方式一: 通过源代码编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#支持的编译器"><span class="toc-text">支持的编译器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置-Qt"><span class="toc-text">配置 Qt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#为-Windows-配置-Qt"><span class="toc-text">为 Windows 配置 Qt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#为-Linux-配置-Qt"><span class="toc-text">为 Linux 配置 Qt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#为-macOS-配置-Qt"><span class="toc-text">为 macOS 配置 Qt</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译QtIFW"><span class="toc-text">编译QtIFW</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方式二-通过安装包安装"><span class="toc-text">方式二: 通过安装包安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QtIFW目录结构"><span class="toc-text">QtIFW目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、bin"><span class="toc-text">1、bin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、doc"><span class="toc-text">2、doc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、examples"><span class="toc-text">3、examples</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、Licenses"><span class="toc-text">4、Licenses</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三-QtIFW制作安装包"><span class="toc-text">三. QtIFW制作安装包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装程序工作流程"><span class="toc-text">安装程序工作流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建安装程序"><span class="toc-text">创建安装程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#制作准备"><span class="toc-text">制作准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、目录结构"><span class="toc-text">1、目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、config-xml"><span class="toc-text">2、config.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3、data"><span class="toc-text">3、data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4、meta-installscript-qs"><span class="toc-text">4、meta/installscript.qs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5、meta-license-txt"><span class="toc-text">5、meta/license.txt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6、meta-package-xml"><span class="toc-text">6、meta/package.xml</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#制作安装包"><span class="toc-text">制作安装包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四-参考"><span class="toc-text">四. 参考</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019-2023&emsp;<a href="/" class="copyright-links" target="_blank" rel="nofollow">Ljjyy.com</a>
                </span> |
                <span>
                    <a href="/about/" class="copyright-links" target="_blank" rel="nofollow">关于我们</a>
                </span> |                
                <span>
                    <a href="/sitemap.xml" class="copyright-links" target="_blank" rel="nofollow">网站地图</a>
                </span> |
                <span>
                    <a href="/archives/" class="copyright-links" target="_blank" rel="nofollow">时间轴</a>
                </span>              
            </div>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>